(this["webpackJsonptoken-lending-ui"]=this["webpackJsonptoken-lending-ui"]||[]).push([[0],{1157:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(58),c=n.n(o),l=(n(586),n(392),n(49)),u=n(81),s=n(62),d=n(27),f=n(14),m=n(107),b=n(11),p=n.n(b),v=n(19),y=n(28),E=n(20),g={},h=[],O=n(12),j=n(104),w=n(21),k=n(308),A=n(29),x=function(e,t){var n=j.Orderbook.LAYOUT.decode(t.data);return{pubkey:e,account:Object(A.a)({},t),info:n}},S=new w.d("EUqojwWA2rd19FZrzeBncJsm38Jm1hEhE3zsmX3bRc2o"),T=function(e,t){var n=j.MARKETS.find((function(t){return t.address.equals(e)})),a=j.Market.getLayout((null===n||void 0===n?void 0:n.programId)||S).decode(t.data),r={pubkey:e,account:Object(A.a)({},t),info:a};return f.d.registerParser(r.info.baseMint,f.b),f.d.registerParser(r.info.quoteMint,f.b),f.d.registerParser(r.info.bids,x),f.d.registerParser(r.info.asks,x),r},N=n(53),I=n(24),B=n(43),L=function(e,t){return t.map((function(t){return f.d.query(e,new w.d(t))}))},M=function(e,t){return{pubkeys:{account:e.pubkey,program:t,mint:e.data.tokenPool,holdingMints:[],holdingAccounts:[e.data.tokenAccountA,e.data.tokenAccountB]},legacy:!1,raw:e}},C=function(e){var t=Object(d.d)(),n=function(){var e=Object(d.d)(),t=Object(r.useState)([]),n=Object(E.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){i([]);var t=function(){var t=Object(v.a)(p.a.mark((function t(n){var a,r,i,o=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],r=[],t.next=4,e.getProgramAccounts(n);case 4:return t.sent.filter((function(e){return e.account.data.length===B.TokenSwapLayout.span||e.account.data.length===B.TokenSwapLayoutV1.span||e.account.data.length===B.TokenSwapLayoutLegacyV0.span})).map((function(t){var i={data:void 0,account:t.account,pubkey:t.pubkey,init:function(){var e=Object(v.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},o=t.account.data.length===B.TokenSwapLayout.span?B.TokenSwapLayout:t.account.data.length===B.TokenSwapLayoutV1.span?B.TokenSwapLayoutV1:B.TokenSwapLayoutLegacyV0;if(o===B.TokenSwapLayoutLegacyV0){i.data=o.decode(t.account.data);var c=M(i,n);c.legacy=a,r.push(c),i.init=Object(v.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all(L(e,[i.data.tokenAccountA,i.data.tokenAccountB]));case 3:n=t.sent,c.pubkeys.holdingMints=[n[0].info.mint,n[1].info.mint],t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}else{i.data=o.decode(t.account.data);var l=M(i,n);l.legacy=a,l.pubkeys.feeAccount=i.data.feeAccount,l.pubkeys.holdingMints=[i.data.mintA,i.data.mintB],r.push(l)}return i})),i=r.map((function(e){var t;return[].concat(Object(y.a)(e.pubkeys.holdingAccounts.map((function(e){return e.toBase58()}))),Object(y.a)(e.pubkeys.holdingMints.map((function(e){return e.toBase58()}))),[null===(t=e.pubkeys.feeAccount)||void 0===t?void 0:t.toBase58(),e.pubkeys.mint.toBase58()]).filter((function(e){return e}))})).flat(),t.next=8,Object(f.e)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return e.data.length===N.a.span?f.d.add(a,e,f.c):e.data.length!==N.b.span||f.d.getMint(a)?e:f.d.addMint(new w.d(a),e)}))}));case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Promise.all([t(Object(I.e)().swap)].concat(Object(y.a)(Object(I.e)().swap_legacy.map((function(e){return t(e,!0)}))))).then((function(e){i(e.flat())}))}),[e]),Object(r.useEffect)((function(){var t=e.onProgramAccountChange(Object(I.e)().swap,function(){var e=Object(v.a)(p.a.mark((function e(t){var n,r,o,c,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,t.accountInfo.data.length===Object(I.e)().swapLayout.span&&(r=t.accountInfo,o={data:Object(I.e)().swapLayout.decode(r.data),account:r,pubkey:new w.d(n)},(c=a&&a.findIndex((function(e){return e.pubkeys.account.toBase58()===n})))&&c>=0&&a?(l=a.filter((function(e,t){return t!==c})),i([].concat(Object(y.a)(l),[M(o,Object(I.e)().swap)]))):((u=M(o,Object(I.e)().swap)).pubkeys.feeAccount=o.data.feeAccount,u.pubkeys.holdingMints=[o.data.mintA,o.data.mintB],i([].concat(Object(y.a)(a),[u]))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,a]),{pools:a}}().pools,a=Object(r.useState)(),i=Object(E.a)(a,2),o=i[0],c=i[1],l=Object(r.useMemo)((function(){return Object(y.a)(e).sort()}),Object(y.a)(e));return Object(r.useEffect)((function(){Object(v.a)(p.a.mark((function e(){var a,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c(void 0),a=n.filter((function(e){return!e.legacy})).filter((function(e){return e.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort().every((function(e,t){return e===l[t]}))})),r=0;case 3:if(!(r<a.length)){e.next=14;break}return i=a[r],e.next=7,f.d.query(t,i.pubkeys.holdingAccounts[0]);case 7:if(e.sent.info.amount.eqn(0)){e.next=11;break}return c(i),e.abrupt("return");case 11:r++,e.next=3;break;case 14:case"end":return e.stop()}}),e)})))()}),[t,l,n]),o};!function(e){e[e.Add=0]="Add",e[e.SwapGivenInput=1]="SwapGivenInput",e[e.SwapGivenProceeds=2]="SwapGivenProceeds"}(a||(a={}));var _=new Date("2020-10-27"),R=i.a.createContext(null),q=new k.a;function P(e){var t=e.children,n=void 0===t?null:t,a=Object(d.e)().endpoint,o=Object(r.useMemo)((function(){return new Map}),[]),c=Object(r.useState)([]),l=Object(E.a)(c,2),u=l[0],s=l[1],m=Object(r.useState)(new Map),b=Object(E.a)(m,2),h=b[0],O=(b[1],Object(r.useMemo)((function(){return new w.b(a,"recent")}),[a])),k=Object(r.useMemo)((function(){return Object(y.a)(new Set(u).values()).reduce((function(e,t){var n=t,a=j.TOKEN_MINTS.find((function(e){return e.address.toBase58()===n})),r=g[n],i="".concat(null===a||void 0===a?void 0:a.name,"/USDC"),o=j.MARKETS.find((function(e){return e.name===i||e.address.toBase58()===r}));return o&&e.set(n,{marketInfo:o}),e}),new Map)}),[u]);Object(r.useEffect)((function(){var e=0,t=function(){var n=Object(v.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,G(O,Object(y.a)(o.keys()));case 2:q.raiseMarketUpdated(new Set(Object(y.a)(k.keys()))),e=window.setTimeout((function(){return t()}),3e4);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return function(){var e=Object(v.a)(p.a.mark((function e(){var n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Map,Object(y.a)(k.keys()).forEach((function(e){var t=k.get(e);t&&n.set(t.marketInfo.address.toBase58(),e)})),a=Object(y.a)(k.values()).map((function(e){return e.marketInfo.address.toBase58()})),e.next=5,Object(f.e)(O,a.filter((function(e){return void 0===f.d.get(e)})),"single").then((function(e){var t=e.keys,r=e.array;return a.forEach((function(){})),r.map((function(e,a){var r=t[a],i=n.get(r);if(i){var o=k.get(i);if(o){var c=o.marketInfo.address;f.d.add(c,e,T)}}return e}))}));case 5:return r=new Set,a.forEach((function(e){var t=f.d.get(e);if(t){var n=t;f.d.get(n.info.baseMint)||r.add(n.info.baseMint.toBase58()),f.d.get(n.info.baseMint)||r.add(n.info.quoteMint.toBase58()),r.add(n.info.bids.toBase58()),r.add(n.info.asks.toBase58())}})),e.next=9,G(O,Object(y.a)(r.keys()));case 9:q.raiseMarketUpdated(new Set(Object(y.a)(k.keys()))),t();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){window.clearTimeout(e)}}),[k,o,O]);var A=Object(r.useCallback)((function(e){var t;return K(null===(t=k.get(e))||void 0===t?void 0:t.marketInfo.address.toBase58(),e)}),[k]),x=Object(r.useCallback)((function(e){var t=k.get(e),n=f.d.get((null===t||void 0===t?void 0:t.marketInfo.address.toBase58())||"");if(!n)return function(){};var a=n.info.bids.toBase58(),r=n.info.asks.toBase58();return o.set(a,(o.get(a)||0)+1),o.set(r,(o.get(r)||0)+1),function(){o.set(a,(o.get(a)||0)-1),o.set(r,(o.get(r)||0)-1),Object(y.a)(o.keys()).forEach((function(e){(o.get(e)||0)<=0&&o.delete(e)}))}}),[k,o]),S=Object(r.useCallback)((function(e){var t=Object(y.a)(new Set([].concat(Object(y.a)(u),Object(y.a)(e))).values());u.length!==t.length&&s(t)}),[s,u]);return i.a.createElement(R.Provider,{value:{midPriceInUSD:A,marketEmitter:q,accountsToObserve:o,marketByMint:k,subscribeToMarket:x,precacheMarkets:S,dailyVolume:h}},n)}var D=function(){return Object(r.useContext)(R)},W=function(e){var t=Object(r.useContext)(R),n=Object(d.e)().tokenMap,a=Object(r.useState)([]),i=Object(E.a)(a,2),o=i[0],c=i[1],l=null===t||void 0===t?void 0:t.subscribeToMarket,u=null===t||void 0===t?void 0:t.marketEmitter,s=null===t||void 0===t?void 0:t.marketByMint,m=null===t||void 0===t?void 0:t.dailyVolume,b=e.map((function(e){return e.pubkeys.account.toBase58()})).join(",");return Object(r.useEffect)((function(){if(u&&l&&0!==e.length){var t=Object(y.a)(new Set(Object(y.a)(null===s||void 0===s?void 0:s.keys())).keys()).map((function(e){return l(e)})),a=function(){c(function(e,t,n,a){var r=new Date;if(!t)return[];return e.filter((function(e){return e.pubkeys.holdingMints&&e.pubkeys.holdingMints.length>1})).map((function(e,i){var o,c,l,u=(e.pubkeys.holdingMints||[]).map((function(e){return e.toBase58()})).sort(),s=f.d.getMint(u[0]),d=f.d.getMint(u[1]),m=f.d.get(e.pubkeys.holdingAccounts[0]),b=f.d.get(e.pubkeys.holdingAccounts[1]),p=(null===m||void 0===m?void 0:m.info.mint.toBase58())===u[0]?m:b,v=(null===b||void 0===b?void 0:b.info.mint.toBase58())===u[1]?b:m,y=K((null===(o=t.get(u[0]))||void 0===o?void 0:o.marketInfo.address.toBase58())||"",u[0]),E=y*Object(O.c)(p,s),g=K((null===(c=t.get(u[1]))||void 0===c?void 0:c.marketInfo.address.toBase58())||"",u[1])*Object(O.c)(v,d),j=f.d.getMint(e.pubkeys.mint);if(!(null===j||void 0===j?void 0:j.supply.eqn(0))){var w=function(e,t,n,a){var r=0,i=h.find((function(t){return t.pool.equals(e.pubkeys.mint)}));i&&(r=i.airdrops.reduce((function(e,r){var i,o=null===(i=t.get(r.mint.toBase58()))||void 0===i?void 0:i.marketInfo.address;if(o){var c=K(null===o||void 0===o?void 0:o.toBase58(),r.mint.toBase58());e+=r.amount*c/(n+a)*(365/30)}return e}),0));return r}(e,t,E,g),k=0,A=y*((null===n||void 0===n||null===(l=n.get(e.pubkeys.mint.toBase58()))||void 0===l?void 0:l.volume24hA)||0),x=.0025*A,S=0,T=w,N=w;if(e.pubkeys.feeAccount){var I=f.d.get(e.pubkeys.feeAccount);if(j&&I&&I.info.mint.toBase58()===e.pubkeys.mint.toBase58()){var B=(null===I||void 0===I?void 0:I.info.amount.toNumber())/(null===j||void 0===j?void 0:j.supply.toNumber());if(0!==(S=.003*(k=(B*E+B*g)/4e-4))){var L=B*E/4e-4,M=B*g/4e-4,C=Math.floor((r.getTime()-_.getTime())/864e5),R=parseFloat(L/C*.003*356)/E,q=parseFloat(M/C*.003*356)/g;T+=Math.max(R,q),N+=parseFloat(.003*A*356)/E}}}var P=f.d.getMint(e.pubkeys.mint),D=Object(O.j)(a,e),W="#/?pair=".concat(Object(O.j)(a,e,!1).replace("/","-"));return{key:e.pubkeys.account.toBase58(),id:i,name:D,names:u.map((function(e){return Object(O.m)(a,e)})),accounts:[null===p||void 0===p?void 0:p.pubkey,null===v||void 0===v?void 0:v.pubkey],address:e.pubkeys.mint.toBase58(),link:W,mints:u,liquidityA:Object(O.c)(p,s),liquidityAinUsd:E,liquidityB:Object(O.c)(v,d),liquidityBinUsd:g,supply:P&&((null===P||void 0===P?void 0:P.supply.toNumber())/Math.pow(10,(null===P||void 0===P?void 0:P.decimals)||0)).toFixed(9),fees:S,fees24h:x,liquidity:E+g,volume:k,volume24h:A,apy:Number.isFinite(T)?T:0,apy24h:Number.isFinite(N)?N:0,map:n,extra:null===n||void 0===n?void 0:n.get(e.pubkeys.account.toBase58()),raw:e}}})).filter((function(e){return void 0!==e}))}(e,s,m,n))},r=u.onMarket(a);return a(),function(){r&&r(),t.forEach((function(e){return e&&e()}))}}}),[e,n,m,b,l,u,s]),o};var U=function(e){var t=Object(r.useContext)(R),n=t.midPriceInUSD,a=t.subscribeToMarket,i=t.marketEmitter,o=Object(r.useState)(0),c=Object(E.a)(o,2),l=c[0],u=c[1];return Object(r.useEffect)((function(){var t=a(e),r=function(){n&&u(n(e))};r();var o=i.onMarket(r);return function(){t(),o()}}),[n,e,i,a]),{price:l,isBase:1===l}},F=function(e,t){var n=e.getL2(1),a=t.getL2(1);return n.length>0&&a.length>0?(n[0][0]+a[0][0])/2:0},K=function(e,t){var n,a,r,i,o=j.TOKEN_MINTS.find((function(e){return e.address.toBase58()===t}));if(O.a.has((null===o||void 0===o?void 0:o.name)||""))return 1;if(!e)return 0;var c=f.d.get(e);if(!c)return 0;var l=c.info,u=(null===(n=f.d.get(l.baseMint))||void 0===n?void 0:n.info.decimals)||0,s=(null===(a=f.d.get(l.quoteMint))||void 0===a?void 0:a.info.decimals)||0,d=new j.Market(l,u,s,void 0,l.programId),m=null===(r=f.d.get(l.bids))||void 0===r?void 0:r.info,b=null===(i=f.d.get(l.asks))||void 0===i?void 0:i.info;if(m&&b){var p=new j.Orderbook(d,m.accountFlags,m.slab),v=new j.Orderbook(d,b.accountFlags,b.slab);return F(p,v)}return 0},G=function(){var e=Object(v.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Object(f.e)(t,n,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return f.d.add(new w.d(a),e)}))})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=n(34),z=n(117),Y=function(){return f.d.byParser(Q.f).map((function(e){return f.d.get(e)})).filter((function(e){return void 0!==e}))};function V(){var e=Object(r.useState)(Y()),t=Object(E.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=f.d.emitter.onCache((function(e){e.parser===Q.f&&a(Y())}));return function(){e()}}),[a]),{reserveAccounts:n}}function H(e){var t=Object(d.e)().tokenMap,n=V().reserveAccounts,a=e;if("string"===typeof e){var i=Object(O.k)(t,e);if(i){var o=n.filter((function(e){return e.info.liquidityMint.toBase58()===i.mintAddress}))[0];o&&(a=o.pubkey)}}var c=Object(r.useMemo)((function(){var e;return"string"===typeof a?a:null===(e=a)||void 0===e?void 0:e.toBase58()}),[a]),l=Object(r.useState)(f.d.get(c||"")),u=Object(E.a)(l,2),s=u[0],m=u[1];return Object(r.useEffect)((function(){var e=f.d.emitter.onCache((function(e){e.id===c&&m(f.d.get(c))}));return function(){e()}}),[c,m]),s}function J(e){var t=Object(d.e)().tokenMap,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(O.m)(t,n)}function X(e,t){var n=Object(r.useMemo)((function(){return"string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58()}),[e]),a=Object(z.a)().userAccounts,i=Object(r.useState)(0),o=Object(E.a)(i,2),c=o[0],l=o[1],u=D(),s=u.marketEmitter,d=u.midPriceInUSD,m=Object(f.h)(n),b=Object(r.useMemo)((function(){return a.filter((function(e){return n===e.info.mint.toBase58()&&(!t||t.equals(e.pubkey))})).sort((function(e,t){return t.info.amount.sub(e.info.amount).toNumber()}))}),[a,n,t]),p=Object(r.useMemo)((function(){return b.reduce((function(e,t){return e+t.info.amount.toNumber()}),0)}),[b]),v=Object(r.useMemo)((function(){return Object(O.i)(p,m)}),[m,p]);return Object(r.useEffect)((function(){var e=function(){l(v*d(n||""))},t=s.onMarket((function(t){e()}));return e(),function(){t()}}),[v,d,s,n,l]),{balance:v,balanceLamports:p,balanceInUSD:c,accounts:b,hasBalance:b.length>0&&v>0}}function Z(e,t){var n=Object(f.h)(null===e||void 0===e?void 0:e.collateralMint),a=X(null===e||void 0===e?void 0:e.collateralMint,t),i=a.balanceLamports,o=a.accounts,c=Object(r.useState)(0),l=Object(E.a)(c,2),u=l[0],s=l[1],d=D(),m=d.marketEmitter,b=d.midPriceInUSD,p=Object(r.useMemo)((function(){return e&&$(e,i)}),[i,e]),v=Object(r.useMemo)((function(){return Object(O.i)(p,n)}),[p,n]);return Object(r.useEffect)((function(){var t=function(){var t;s(v*b((null===e||void 0===e||null===(t=e.liquidityMint)||void 0===t?void 0:t.toBase58())||""))},n=m.onMarket((function(n){n.ids.has((null===e||void 0===e?void 0:e.dexMarket.toBase58())||"")&&t()}));return t(),function(){n()}}),[v,b,m,n,s,e]),{balance:v,balanceLamports:p,balanceInUSD:u,mint:null===e||void 0===e?void 0:e.collateralMint,accounts:o,hasBalance:o.length>0&&v>0}}function $(e,t){return Object(Q.u)(e)*(t/((null===e||void 0===e?void 0:e.state.collateralMintSupply.toNumber())||1))}var ee,te=function(){return f.d.byParser(Q.e).map((function(e){return f.d.get(e)})).filter((function(e){return void 0!==e}))};function ne(){var e=function(){var e=Object(r.useState)(te()),t=Object(E.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){var e=f.d.emitter.onCache((function(e){e.parser===Q.e&&a(te())}));return function(){e()}}),[a]),{obligations:n}}().obligations,t=V().reserveAccounts,n=Object(d.e)().tokenMap,a=D(),i=a.marketEmitter,o=a.midPriceInUSD,c=Object(r.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.pubkey.toBase58(),t),e}),new Map)}),[t]),l=Object(r.useCallback)((function(){return 0===c.size?[]:e.map((function(e){return{obligation:e,reserve:c.get(e.info.borrowReserve.toBase58()),collateralReserve:c.get(e.info.collateralReserve.toBase58())}})).filter((function(e){return e.reserve})).filter((function(e){return Object(O.s)(e.obligation.info.borrowAmountWad).toNumber()>0})).map((function(e){var t=e.obligation,a=e.reserve.info,r=e.reserve.info,i=0,c=0,l=0,u=0;if(f.d.get(a.liquidityMint)){var s=f.d.get(e.collateralReserve.info.liquidityMint),d=Object(O.i)(Object(Q.m)(t.info.depositedCollateral,e.reserve.info),null===s||void 0===s?void 0:s.info),b=Object(O.s)(t.info.borrowAmountWad).toNumber(),p=function(e,t,n){var a,r,i,o,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=f.d.get(t.liquidityMint),u=f.d.get(t.collateralMint);if(!l||!u)return 0;var s=f.d.get(n);if(!s)return 0;var d=s.info,b=(null===(a=f.d.get(d.baseMint))||void 0===a?void 0:a.info.decimals)||0,p=(null===(r=f.d.get(d.quoteMint))||void 0===r?void 0:r.info.decimals)||0,v=f.d.get(t.lendingMarket),y=new j.Market(d,b,p,void 0,d.programId),g=null===(i=f.d.get(null===d||void 0===d?void 0:d.bids))||void 0===i?void 0:i.info,h=null===(o=f.d.get(null===d||void 0===d?void 0:d.asks))||void 0===o?void 0:o.info;if(!g||!h)return 0;var w=new j.Orderbook(y,g.accountFlags,g.slab),k=new j.Orderbook(y,h.accountFlags,h.slab),A=v.info.quoteMint.equals(t.liquidityMint)?w:k,x=0,S=Object(O.i)(e,l.info),T=A.isBids?function(e,t){return t/e}:function(e,t){return t*e};if(c){var N=F(w,k);return T(N,S)}var I,B,L,M=A.getL2(1e3),C=Object(m.a)(M);try{for(C.s();!(L=C.n()).done;){var _=Object(E.a)(L.value,2);N=_[0];var R=S>(B=_[1])?B:S;if(x+=T(I,R),(S-=R)<=0)break}}catch(q){C.e(q)}finally{C.f()}return x}(b,e.reserve.info,e.reserve.info.dexMarketOption?e.reserve.info.dexMarket:e.collateralReserve.info.dexMarket,!0),v=e.reserve.info.liquidityMint.toBase58(),y=f.d.get(v);l=Object(O.i)(b,y.info)*o(v),u=d*o((null===s||void 0===s?void 0:s.pubkey.toBase58())||""),i=100*p/d,c=d*e.reserve.info.config.liquidationThreshold/100/p}return{account:t,info:Object(A.a)(Object(A.a)({},t.info),{},{ltv:i,health:c,borrowedInQuote:l,collateralInQuote:u,liquidationThreshold:e.reserve.info.config.liquidationThreshold,repayName:Object(O.m)(n,a.liquidityMint),collateralName:Object(O.m)(n,r.liquidityMint)})}})).sort((function(e,t){return e.info.health-t.info.health}))}),[e,c,o,n]),u=Object(r.useState)(l()),s=Object(E.a)(u,2),b=s[0],p=s[1];return Object(r.useEffect)((function(){var e=i.onMarket((function(){p(l())}));return function(){e()}}),[l,p,i,o]),{obligations:b}}function ae(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=ne().obligations;return Object(r.useMemo)((function(){return n.find((function(e){return e.account.pubkey.toBase58()===t}))}),[n,t])}function re(){var e=Object(z.a)().userAccounts,t=ne().obligations,n=Object(r.useMemo)((function(){return e.reduce((function(e,t){var n=t.info.mint.toBase58();return e.set(n,[].concat(Object(y.a)(e.get(n)||[]),[t])),e}),new Map)}),[e]),a=Object(r.useMemo)((function(){return 0===n.size?[]:t.filter((function(e){return void 0!==n.get(e.info.tokenMint.toBase58())})).map((function(e){return{obligation:e,userAccounts:Object(y.a)(n.get(e.info.tokenMint.toBase58()))}})).sort((function(e,t){return t.obligation.info.borrowedInQuote-e.obligation.info.borrowedInQuote}))}),[n,t]);return{userObligations:a,totalInQuote:a.reduce((function(e,t){return e+t.obligation.info.borrowedInQuote}),0)}}function ie(e,t){var n=re().userObligations;return{userObligationsByReserve:Object(r.useMemo)((function(){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();return n.filter((function(e){return a&&r?e.obligation.info.borrowReserve.toBase58()===a&&e.obligation.info.collateralReserve.toBase58()===r:a&&e.obligation.info.borrowReserve.toBase58()===a||r&&e.obligation.info.collateralReserve.toBase58()===r}))}),[e,t,n])}}function oe(e,t){var n=Object(z.a)().userAccounts,a=V().reserveAccounts,i=Object(r.useState)([]),o=Object(E.a)(i,2),c=o[0],l=o[1],u=D(),s=u.marketEmitter,m=u.midPriceInUSD,b=Object(d.e)().tokenMap,p=Object(r.useMemo)((function(){return a.reduce((function(n,a){var r=a.pubkey.toBase58();return e&&e.has(r)||t&&!t.has(r)||n.set(a.info.collateralMint.toBase58(),a),n}),new Map)}),[a,e,t]);return Object(r.useEffect)((function(){var e=new Set(a.map((function(e){return e.info.dexMarket.toBase58()}))),t=function(){return n.filter((function(e){return p.has(null===e||void 0===e?void 0:e.info.mint.toBase58())})).map((function(e){var t=p.get(null===e||void 0===e?void 0:e.info.mint.toBase58()),n=f.d.get(t.info.collateralMint),a=$(t.info,null===e||void 0===e?void 0:e.info.amount.toNumber()),r=Object(O.i)(a,null===n||void 0===n?void 0:n.info);return{account:e,info:{amount:r,amountInQuote:m(t.info.liquidityMint.toBase58())*r,apy:Object(Q.k)(t.info),name:Object(O.m)(b,t.info.liquidityMint)},reserve:t}})).sort((function(e,t){return t.info.amountInQuote-e.info.amountInQuote}))},r=s.onMarket((function(n){Object(y.a)(n.ids.values()).every((function(t){return!e.has(t)}))||l(t())}));return l(t()),function(){r()}}),[n,a,p,b,m,s]),{userDeposits:c,totalInQuote:c.reduce((function(e,t){return e+t.info.amountInQuote}),0)}}!function(e){e[e.AbsoluteValue=0]="AbsoluteValue",e[e.Percent=1]="Percent"}(ee||(ee={}));var ce=function(e){var t=Object(r.useState)(""),n=Object(E.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(0),c=Object(E.a)(o,2),l=c[0],u=c[1],s=Object(r.useState)(ee.Percent),d=Object(E.a)(s,2),f=d[0],m=d[1];return{value:a,setValue:Object(r.useCallback)((function(t){m(ee.AbsoluteValue),i(t),u(e(t))}),[m,i,u,e]),pct:l,setPct:Object(r.useCallback)((function(t){m(ee.Percent),u(t),i(e(t))}),[m,i,u,e]),type:f}};function le(e){var t="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),n=Object(r.useState)(f.d.get(t||"")),a=Object(E.a)(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){var e=f.d.emitter.onCache((function(e){e.id===t&&o(f.d.get(t))}));return function(){e()}}),[t,o]),i}function ue(e){var t,n,a=Object(r.useMemo)((function(){return"string"===typeof e?e:(null===e||void 0===e?void 0:e.toBase58())||""}),[e]),i=H(a),o=Object(f.h)(null===i||void 0===i?void 0:i.info.liquidityMint),c=null===i||void 0===i?void 0:i.info.liquidityMint,l=null===c||void 0===c?void 0:c.toBase58(),u=le(null===i||void 0===i?void 0:i.info.lendingMarket),s=Object(O.i)(null===i||void 0===i?void 0:i.info.state.availableLiquidity,o),d=null===u||void 0===u||null===(t=u.info)||void 0===t||null===(n=t.quoteMint)||void 0===n?void 0:n.toBase58(),m=l!==d,b=Object(r.useMemo)((function(){return new Set([a])}),[a]),p=Object(r.useMemo)((function(){var e=Y().find((function(e){return e.info.liquidityMint.toBase58()===d}));return m&&e?new Set([e.pubkey.toBase58()]):void 0}),[m,d]),v=oe(b,p),y=v.totalInQuote,E=U(l).price,g=s*E,h=re(),j=h.totalInQuote,w=j+y,k=0===w?0:j/w;return l===d?{borrowingPower:Math.min(y,g),totalInQuote:y,utilization:k}:{borrowingPower:y/E,totalInQuote:y,utilization:k}}var se=i.a.createContext(null);function de(e){var t=e.children,n=void 0===t?null:t,a=fe().accounts;return i.a.createElement(se.Provider,{value:{accounts:a}},n)}var fe=function(){var e=Object(d.d)(),t=Object(r.useState)([]),n=Object(E.a)(t,2),a=n[0],i=n[1],o=V().reserveAccounts,c=D().precacheMarkets,l=Object(r.useCallback)((function(e){return Object(Q.t)(e.account)?f.d.add(e.pubkey.toBase58(),e.account,Q.f):Object(Q.r)(e.account)?f.d.add(e.pubkey.toBase58(),e.account,Q.c):Object(Q.s)(e.account)?f.d.add(e.pubkey.toBase58(),e.account,Q.e):void 0}),[]);return Object(r.useEffect)((function(){o.length>0&&c(o.map((function(e){return e.info.liquidityMint.toBase58()})))}),[o,c]),Object(r.useEffect)((function(){i([]);var t=function(){var t=Object(v.a)(p.a.mark((function t(){var n,a,r,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getProgramAccounts(I.a);case 2:return n=t.sent,a=n.map(l).filter((function(e){return void 0!==e})),r=a.filter((function(e){return void 0!==(null===e||void 0===e?void 0:e.info).lendingMarket})).map((function(e){return e})),i=Object(y.a)(r.map((function(e){return[f.d.registerParser(null===e||void 0===e?void 0:e.info.collateralMint.toBase58(),f.b),f.d.registerParser(null===e||void 0===e?void 0:e.info.liquidityMint.toBase58(),f.b),f.d.registerParser((null===e||void 0===e?void 0:e.info.dexMarketOption)?null===e||void 0===e?void 0:e.info.dexMarket.toBase58():"",T)].filter((function(e){return e}))}))).flat(),t.next=8,Object(f.e)(e,i,"single").then((function(e){var t=e.keys;return e.array.map((function(e,n){var a=t[n];return f.d.add(a,e),e}))}));case 8:return n.map(l).filter((function(e){return void 0!==e})),t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Promise.all([t()]).then((function(e){i(e.flat())}))}),[e,l]),Object(r.useEffect)((function(){var t=e.onProgramAccountChange(I.a,function(){var e=Object(v.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.accountId,a={pubkey:new w.d(n),account:t.accountInfo},l(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"singleGossip");return function(){e.removeProgramAccountChangeListener(t)}}),[e,a,l]),{accounts:a}},me=n(121),be=n(1173),pe=n(1174),ve=n(1175),ye=n(1176),Ee=n(1177),ge=n(1178),he=n(1179),Oe=n(1180),je=n(1161),we=n(573),ke=n(578),Ae=n(130),xe=n(556),Se=n.n(xe),Te=n(25),Ne=n.n(Te),Ie=(n(745),function(e){var t,n=e.style,a=e.className,o="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58(),c=Object(r.useRef)();return Object(r.useEffect)((function(){o&&c.current&&(c.current.innerHTML="",c.current.className=a||"",c.current.appendChild(Se()((null===n||void 0===n?void 0:n.width)||16,parseInt(Ne.a.decode(o).toString("hex").slice(5,15),16))))}),[o,n,a]),i.a.createElement("div",{className:"identicon-wrapper",ref:c,style:e.style})}),Be=function(e){var t=Object(s.b)().wallet,n=Object(f.i)().account;return(null===t||void 0===t?void 0:t.publicKey)?i.a.createElement("div",{className:"wallet-wrapper"},i.a.createElement("span",null,O.e.format(((null===n||void 0===n?void 0:n.lamports)||0)/w.c)," SOL"),i.a.createElement("div",{className:"wallet-key"},Object(O.p)("".concat(t.publicKey)),i.a.createElement(Ie,{address:t.publicKey.toBase58(),style:{marginLeft:"0.5rem",display:"flex"}}))):null},Le=n(1172),Me=n(1164),Ce=function(){var e=Object(s.b)(),t=e.connected,n=e.disconnect,a=Object(d.e)(),r=a.endpoint,o=a.setEndpoint;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{display:"grid"}},"Network:"," ",i.a.createElement(Me.a,{onSelect:o,value:r,style:{marginBottom:20}},d.b.map((function(e){var t=e.name,n=e.endpoint;return i.a.createElement(Me.a.Option,{value:n,key:n},t)}))),t&&i.a.createElement(Ae.a,{type:"primary",onClick:n},"Disconnect")))},_e=n(13),Re=n(319),qe=n(1160),Pe=function(e){var t=Object(s.b)(),n=t.connected,a=t.connect,r=t.select,o=t.provider,c=e.onClick,l=(e.children,e.disabled),u=e.allowWalletChange,d=Object(Re.a)(e,["onClick","children","disabled","allowWalletChange"]),f=i.a.createElement(me.a,null,i.a.createElement(me.a.Item,{key:"3",onClick:r},"Change Wallet"));return o&&u?i.a.createElement(qe.a.Button,{onClick:n?c:a,disabled:n&&l,overlay:f},_e.b.CONNECT_LABEL):i.a.createElement(Ae.a,Object.assign({},d,{onClick:n?c:a,disabled:n&&l}),n?e.children:_e.b.CONNECT_LABEL)},De=function(e){var t=Object(s.b)().connected;return i.a.createElement("div",{className:"App-Bar-right"},t?i.a.createElement(Be,null):i.a.createElement(Pe,{type:"text",size:"large",allowWalletChange:!0,style:{color:"#2abdd2"}}),i.a.createElement(ke.a,{placement:"topRight",title:_e.b.SETTINGS_TOOLTIP,content:i.a.createElement(Ce,null),trigger:"click"},i.a.createElement(Ae.a,{shape:"circle",size:"large",type:"text",icon:i.a.createElement(Le.a,null)})),e.right)},We=n(386),Ue=i.a.memo((function(e){var t=Object(d.e)().env,n=Object(u.g)(),a={"/dashboard":"2","/deposit":"3","/borrow":"4","/liquidate":"5","/margin":"6","/faucet":"7","/transactions":"8"},r=a[Object(y.a)(Object.keys(a)).find((function(e){return n.pathname.startsWith(e)}))||""]||"1";return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"Banner"},i.a.createElement("div",{className:"Banner-description"},_e.b.AUDIT_WARNING)),i.a.createElement(we.a,{title:_e.b.APP_TITLE,footerRender:function(){return i.a.createElement("div",{className:"footer",title:_e.b.FOOTER},_e.b.FOOTER)},navTheme:"dark",headerTheme:"dark",theme:"dark",layout:"mix",fixSiderbar:!0,primaryColor:"#d83aeb",logo:i.a.createElement("div",{className:"App-logo"}),rightContentRender:function(){return i.a.createElement(De,null)},links:[],menuContentRender:function(){return i.a.createElement("div",{className:"links"},i.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:[r],mode:"inline"},i.a.createElement(me.a.Item,{key:"1",icon:i.a.createElement(be.a,null)},i.a.createElement(l.b,{to:{pathname:"/"}},_e.b.MENU_HOME)),i.a.createElement(me.a.Item,{key:"2",icon:i.a.createElement(pe.a,null)},i.a.createElement(l.b,{to:{pathname:"/dashboard"}},_e.b.MENU_DASHBOARD)),i.a.createElement(me.a.Item,{key:"3",icon:i.a.createElement(ve.a,null)},i.a.createElement(l.b,{to:{pathname:"/deposit"}},_e.b.MENU_DEPOSIT)),i.a.createElement(me.a.Item,{key:"4",icon:i.a.createElement(ye.a,null)},i.a.createElement(l.b,{to:{pathname:"/borrow"}},_e.b.MENU_BORROW)),i.a.createElement(me.a.Item,{key:"5",icon:i.a.createElement(Ee.a,null)},i.a.createElement(l.b,{to:{pathname:"/liquidate"}},_e.b.MENU_LIQUIDATE)),"mainnet-beta"!==t&&i.a.createElement(me.a.Item,{key:"7",icon:i.a.createElement(ge.a,null)},i.a.createElement(l.b,{to:{pathname:"/faucet"}},_e.b.MENU_FAUCET)),i.a.createElement(me.a.Item,{key:"8",icon:i.a.createElement(he.a,null)},i.a.createElement(l.b,{to:{pathname:"/transactions"}},_e.b.MENU_TRANSACTION))),i.a.createElement(me.a,{theme:"dark",defaultSelectedKeys:[r],selectable:!1,mode:"inline",className:"bottom-links"},i.a.createElement(me.a.Item,{key:"16",icon:i.a.createElement(Oe.a,null)},i.a.createElement("a",{title:"Fork",href:"".concat(We.repository.url,"/fork"),target:"_blank",rel:"noopener noreferrer"},"Fork")),",",i.a.createElement(me.a.Item,{key:"15",icon:i.a.createElement(je.a,null)},i.a.createElement("a",{title:"Gtihub",href:We.repository.url,target:"_blank",rel:"noopener noreferrer"},"Github"))))}},e.children))})),Fe=n(223),Ke=n(132),Ge=n(1169),Qe=n(1166),ze=function(e){var t,n,a=Object(d.e)().tokenMap,r=Object(O.l)(a,e.mintAddress),o=e.size||20;return r?i.a.createElement("img",{alt:"Token icon",className:e.className,key:r,width:(null===(t=e.style)||void 0===t?void 0:t.width)||o.toString(),height:(null===(n=e.style)||void 0===n?void 0:n.height)||o.toString(),src:r,style:Object(A.a)({marginRight:"0.5rem",marginTop:"0.11rem",borderRadius:"10rem",backgroundColor:"white",backgroundClip:"padding-box"},e.style)}):i.a.createElement(Ie,{address:e.mintAddress,style:Object(A.a)({marginRight:"0.5rem",width:o,height:o,marginTop:2},e.style)})},Ye=function(e){var t,n,a=J(e.reserve.liquidityMint),o=Object(f.h)(e.reserve.liquidityMint),c=Object(O.i)(e.reserve.state.availableLiquidity,o),u=Object(r.useMemo)((function(){return Object(O.i)(Object(O.s)(e.reserve.state.borrowedLiquidityWad),o)}),[e.reserve,o]),s=Object(r.useMemo)((function(){return Object(Q.j)(e.reserve)}),[e.reserve]),d=Object(r.useMemo)((function(){return Object(Q.k)(e.reserve)}),[e.reserve]),m=c+u;return i.a.createElement(l.b,{to:"/reserve/".concat(e.address.toBase58())},i.a.createElement("div",{className:"home-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(ze,{mintAddress:e.reserve.liquidityMint}),a),i.a.createElement("div",{title:m.toString()},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(m))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(null===(t=e.item)||void 0===t?void 0:t.marketSize)))),i.a.createElement("div",{title:u.toString()},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(u))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(null===(n=e.item)||void 0===n?void 0:n.borrowed)))),i.a.createElement("div",{title:d.toString()},O.f.format(d)),i.a.createElement("div",{title:s.toString()},O.f.format(s))))},Ve=function(e){var t=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#ffa600"].reverse();return i.a.createElement(Qe.a,{title:e.title,valueRender:function(){return i.a.createElement("div",{style:{width:"100%",height:37,display:"flex",backgroundColor:"lightgrey",fontSize:12,lineHeight:"37px"}},e.items.map((function(n,a){return i.a.createElement("div",{key:e.name(n),title:e.name(n),style:{overflow:"hidden",width:"".concat(100*e.getPct(n),"%"),backgroundColor:e.color&&e.color(n)||t[a%e.items.length]}},e.name(n))})))}})},He=(n(811),function(){var e=V().reserveAccounts,t=D(),n=t.marketEmitter,a=t.midPriceInUSD,o=Object(d.e)().tokenMap,c=Object(r.useState)({marketSize:0,borrowed:0,lentOutPct:0,items:[]}),l=Object(E.a)(c,2),u=l[0],s=l[1];return Object(r.useEffect)((function(){var t=function(){var t={marketSize:0,borrowed:0,lentOutPct:0,items:[]};e.forEach((function(e){var n,r=Object(B.reserveMarketCap)(e.info),i=f.d.get(e.info.liquidityMint.toBase58());if(i){var c=a(null===i||void 0===i?void 0:i.pubkey.toBase58()),l={key:e.pubkey.toBase58(),marketSize:Object(O.i)(r,null===i||void 0===i?void 0:i.info)*c,borrowed:Object(O.i)(Object(O.s)(null===(n=e.info)||void 0===n?void 0:n.state.borrowedLiquidityWad).toNumber(),i.info)*c,name:Object(O.m)(o,e.info.liquidityMint.toBase58())};t.items.push(l),t.marketSize=t.marketSize+l.marketSize,t.borrowed=t.borrowed+l.borrowed}})),t.lentOutPct=t.borrowed/t.marketSize,t.lentOutPct=Number.isFinite(t.lentOutPct)?t.lentOutPct:0,t.items=t.items.sort((function(e,t){return t.marketSize-e.marketSize})),s(t)},r=n.onMarket((function(){t()}));return t(),function(){r()}}),[n,a,s,e,o]),i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Fe.a,{gutter:_e.a,className:"home-info-row"},i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:"Current market size",value:u.marketSize,precision:2,valueStyle:{color:"#3fBB00"},prefix:"$"}))),i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:"Total borrowed",value:u.borrowed,precision:2,prefix:"$"}))),i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:"% Lent out",value:100*u.lentOutPct,precision:2,suffix:"%"}))),i.a.createElement(Ke.a,{xs:24,xl:9},i.a.createElement(Ge.a,null,i.a.createElement(Ve,{title:"Market composition",name:function(e){return e.name},getPct:function(e){return e.marketSize/u.marketSize},items:u.items})))),i.a.createElement(Ge.a,null,i.a.createElement("div",{className:"home-item home-header"},i.a.createElement("div",null,_e.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,_e.b.TABLE_TITLE_MARKET_SIZE),i.a.createElement("div",null,_e.b.TABLE_TITLE_TOTAL_BORROWED),i.a.createElement("div",null,_e.b.TABLE_TITLE_DEPOSIT_APY),i.a.createElement("div",null,_e.b.TABLE_TITLE_BORROW_APY)),e.map((function(e){return i.a.createElement(Ye,{key:e.pubkey.toBase58(),reserve:e.info,address:e.pubkey,item:u.items.find((function(t){return t.key===e.pubkey.toBase58()}))})}))))}),Je=function(e){var t=J(e.reserve.liquidityMint),n=U(e.reserve.liquidityMint.toBase58()).price,a=ue(e.address),r=a.borrowingPower,o=a.totalInQuote,c=Object(Q.j)(e.reserve);return i.a.createElement(l.b,{to:"/borrow/".concat(t)},i.a.createElement("div",{className:"borrow-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(ze,{mintAddress:e.reserve.liquidityMint}),t),i.a.createElement("div",null,"$",O.e.format(n)),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(r))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(o)))),i.a.createElement("div",null,O.f.format(c)),i.a.createElement("div",null,i.a.createElement(Ae.a,{type:"primary"},i.a.createElement("span",null,_e.b.BORROW_ACTION)))))},Xe=(n(812),function(){var e=V().reserveAccounts;return i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Ge.a,null,i.a.createElement("div",{className:"borrow-item deposit-header"},i.a.createElement("div",null,_e.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,"Serum Dex Price"),i.a.createElement("div",null,_e.b.TABLE_TITLE_MAX_BORROW),i.a.createElement("div",null,_e.b.TABLE_TITLE_APY),i.a.createElement("div",null)),e.map((function(e){return i.a.createElement(Je,{key:e.pubkey.toBase58(),reserve:e.info,address:e.pubkey})}))))}),Ze=(n(813),n(1170)),$e=n(54),et=n(98);function tt(e,t,n,a,r,i){if(!n.info.isNative)return n.pubkey;var o=it(e,a,r,i);return e.push(N.d.createInitAccountInstruction(I.c,I.d,o,a)),t.push(N.d.createCloseAccountInstruction(I.c,o,a,a,[])),o}function nt(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:65548,i=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:i.publicKey,lamports:0,space:r,programId:a})),n.push(i),i.publicKey}function at(e,t,n,a){var r=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:B.LendingObligationLayout.span,programId:I.a})),a.push(r),r.publicKey}function rt(e,t,n,a){var r=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:N.b.span,programId:I.c})),a.push(r),r.publicKey}function it(e,t,n,a){var r=new w.a;return e.push(w.g.createAccount({fromPubkey:t,newAccountPubkey:r.publicKey,lamports:n,space:N.a.span,programId:I.c})),a.push(r),r.publicKey}function ot(e,t,n,a,r,i){var o=it(e,t,n,i);return e.push(N.d.createInitAccountInstruction(I.c,a,o,r)),o}function ct(e,t,n,a,r,i,o,c){var l,u=i.toBase58(),s=f.d.byParser(f.c).map((function(e){return f.d.get(e)})).find((function(e){return void 0!==e&&e.info.mint.toBase58()===u&&e.info.owner.toBase58()===t.toBase58()&&(void 0===c||!c.has(e.pubkey.toBase58()))})),d=u===I.d.toBase58();return s&&!d?l=s.pubkey:(l=ot(n,e,r,i,t,o),d&&a.push(N.d.createCloseAccountInstruction(I.c,l,e,e,[]))),l}var lt=function(){var e=Object(v.a)(p.a.mark((function e(t,n,a,r,i,o,c,l,u){var s,m,b,v,g,h,j,k,A,x,S,T,L,M,C,_,R,q,P,D,W,U,F,K,G,Q,z;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new Error("Wallet is not connected");case 2:return Object($e.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),s=[],m=[],b=[],v=[],e.next=9,w.d.findProgramAddress([c.info.lendingMarket.toBuffer()],I.a);case 9:return g=e.sent,h=Object(E.a)(g,1),j=h[0],e.next=14,t.getMinimumBalanceForRentExemption(N.a.span);case 14:if(k=e.sent,!l){e.next=19;break}e.t0=l.pubkey,e.next=27;break;case 19:return e.t1=at,e.t2=m,e.t3=n.publicKey,e.next=24,t.getMinimumBalanceForRentExemption(B.LendingObligationLayout.span);case 24:e.t4=e.sent,e.t5=s,e.t0=(0,e.t1)(e.t2,e.t3,e.t4,e.t5);case 27:if(A=e.t0,!l){e.next=32;break}e.t6=l.info.tokenMint,e.next=40;break;case 32:return e.t7=rt,e.t8=m,e.t9=n.publicKey,e.next=37,t.getMinimumBalanceForRentExemption(N.b.span);case 37:e.t10=e.sent,e.t11=s,e.t6=(0,e.t7)(e.t8,e.t9,e.t10,e.t11);case 40:if(x=e.t6,S=u||it(m,n.publicKey,k,s),u||m.push(Object(B.initObligationInstruction)(c.pubkey,o.pubkey,A,x,S,n.publicKey,c.info.lendingMarket,j)),T=I.b?ct(n.publicKey,I.b,m,[],k,c.info.collateralMint,s):void 0,L=0,M=0,i!==B.BorrowAmountType.LiquidityBorrowAmount){e.next=55;break}return C=a.info.amount.toNumber(),M=C-k,e.next=51,f.d.query(t,o.info.liquidityMint,f.b);case 51:_=e.sent,L=Object(O.q)(r,null===_||void 0===_?void 0:_.info),e.next=61;break;case 55:if(i!==B.BorrowAmountType.CollateralDepositAmount){e.next=61;break}return e.next=58,f.d.query(t,c.info.collateralMint,f.b);case 58:R=e.sent,L=Object(O.q)(r,null===R||void 0===R?void 0:R.info),M=L;case 61:return q=tt(m,v,a,n.publicKey,M+k,s),e.next=64,ct(n.publicKey,n.publicKey,m,v,k,o.info.liquidityMint,s);case 64:if(P=e.sent,!(m.length>0)){e.next=70;break}return e.next=68,Object(d.c)(t,n,m,Object(y.a)(s));case 68:D=e.sent,Object($e.a)({message:"Obligation accounts created",description:"Transaction ".concat(D),type:"success"});case 70:if(Object($e.a)({message:"Borrowing funds...",description:"Please review transactions to approve.",type:"warn"}),s=[],m=[],b=[].concat(v),W=Object(B.approve)(m,b,q,n.publicKey,M,!1),s.push(W),U=o.info.dexMarketOption?o.info.dexMarket:c.info.dexMarket,F=f.d.get(U)){e.next=80;break}throw new Error("Dex market doesn't exist.");case 80:return K=f.d.get(c.info.lendingMarket),G=K.info.quoteMint.equals(c.info.liquidityMint)?null===F||void 0===F?void 0:F.info.asks:null===F||void 0===F?void 0:F.info.bids,Q=nt(m,n.publicKey,s,I.a),m.push(Object(et.b)(c.pubkey,o.pubkey)),m.push(Object(B.borrowInstruction)(L,i,q,P,c.pubkey,c.info.collateralSupply,c.info.collateralFeesReceiver,o.pubkey,o.info.liquiditySupply,A,x,S,c.info.lendingMarket,j,W.publicKey,U,G,Q,T)),e.prev=85,e.next=88,Object(d.c)(t,n,m.concat(b),s,!0);case 88:z=e.sent,Object($e.a)({message:"Funds borrowed.",type:"success",description:"Transaction - ".concat(z)}),e.next=96;break;case 92:throw e.prev=92,e.t12=e.catch(85),console.error(e.t12),new Error;case 96:case"end":return e.stop()}}),e,null,[[85,92]])})));return function(t,n,a,r,i,o,c,l,u){return e.apply(this,arguments)}}(),ut=function(){var e=Object(v.a)(p.a.mark((function e(t,n,a,r,i,o){var c,l,u,s,f,m,b,v,y,g,h,O;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.publicKey){e.next=2;break}throw new Error("Wallet is not connected");case 2:return Object($e.a)({message:"Depositing funds...",description:"Please review transactions to approve.",type:"warn"}),c=!0,l=[],u=[],s=[],e.next=9,i.getMinimumBalanceForRentExemption(N.a.span);case 9:return f=e.sent,e.next=12,w.d.findProgramAddress([a.lendingMarket.toBuffer()],I.a);case 12:if(m=e.sent,b=Object(E.a)(m,1),v=b[0],y=tt(u,s,t,o.publicKey,n+f,l),g=Object(B.approve)(u,s,y,o.publicKey,n),l.push(g),!c){e.next=24;break}return e.next=21,ct(o.publicKey,o.publicKey,u,s,f,a.collateralMint,l);case 21:h=e.sent,e.next=25;break;case 24:h=it(u,o.publicKey,f,l);case 25:return c?(u.push(Object(Q.h)(r)),u.push(Object(Q.n)(n,y,h,r,a.liquiditySupply,a.collateralMint,a.lendingMarket,v,g.publicKey))):(80,u.push(Object(Q.q)(n,80,y,h,r,a.liquidityMint,a.liquiditySupply,a.collateralMint,a.collateralSupply,a.lendingMarket,v,g.publicKey,a.dexMarket))),e.prev=26,e.next=29,Object(d.c)(i,o,u.concat(s),l,!0);case 29:O=e.sent,Object($e.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(O)}),e.next=36;break;case 33:throw e.prev=33,e.t0=e.catch(26),new Error;case 36:case"end":return e.stop()}}),e,null,[[26,33]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),st=n(568),dt=function(){var e=Object(v.a)(p.a.mark((function e(t,n,a,r,i,o,c,l){var u,s,f,m,b,v,y,g,h,O,j;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.publicKey){e.next=2;break}throw new Error("Wallet is not connected");case 2:return Object($e.a)({message:"Repaying funds...",description:"Please review transactions to approve.",type:"warn"}),u=[],s=[],f=[],e.next=8,c.getMinimumBalanceForRentExemption(N.a.span);case 8:return m=e.sent,e.next=11,w.d.findProgramAddress([i.info.lendingMarket.toBuffer()],I.a);case 11:return b=e.sent,v=Object(E.a)(b,1),y=v[0],g=t.pubkey,l.publicKey.equals(g)&&i.info.liquidityMint.equals(N.c)&&(g=ot(s,l.publicKey,m+n,N.c,l.publicKey,u),f.push(N.d.createCloseAccountInstruction(I.c,g,l.publicKey,l.publicKey,[]))),h=Object(B.approve)(s,f,g,l.publicKey,n),u.push(h),e.next=20,ct(l.publicKey,l.publicKey,s,f,m,o.info.collateralMint,u);case 20:return O=e.sent,Object(B.approve)(s,f,r.pubkey,l.publicKey,r.info.amount.toNumber(),!0,h.publicKey),s.push(Object(et.b)(i.pubkey,o.pubkey)),s.push(Object(st.a)(n,g,O,i.pubkey,i.info.liquiditySupply,o.pubkey,o.info.collateralSupply,a.pubkey,a.info.tokenMint,r.pubkey,i.info.lendingMarket,y,h.publicKey)),e.next=26,Object(d.c)(c,l,s.concat(f),u,!0);case 26:j=e.sent,Object($e.a)({message:"Funds repaid.",type:"success",description:"Transaction - ".concat(j)});case 28:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,c,l){return e.apply(this,arguments)}}(),ft=function(){var e=Object(v.a)(p.a.mark((function e(t,n,a,r,i,o){var c,l,u,s,f,m,b,v,y,g,h;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.publicKey){e.next=2;break}throw new Error("Wallet is not connected");case 2:return Object($e.a)({message:"Withdrawing funds...",description:"Please review transactions to approve.",type:"warn"}),c=[],l=[],u=[],e.next=8,i.getMinimumBalanceForRentExemption(N.a.span);case 8:return s=e.sent,e.next=11,w.d.findProgramAddress([a.lendingMarket.toBuffer()],I.a);case 11:return f=e.sent,m=Object(E.a)(f,1),b=m[0],v=t.pubkey,y=Object(B.approve)(l,u,v,o.publicKey,n),c.push(y),e.next=19,ct(o.publicKey,o.publicKey,l,u,s,a.liquidityMint,c);case 19:return g=e.sent,l.push(Object(Q.h)(r)),l.push(Object(Q.v)(n,v,g,r,a.collateralMint,a.liquiditySupply,a.lendingMarket,b,y.publicKey)),e.prev=22,e.next=25,Object(d.c)(i,o,l.concat(u),c,!0);case 25:h=e.sent,Object($e.a)({message:"Funds deposited.",type:"success",description:"Transaction - ".concat(h)}),e.next=31;break;case 29:e.prev=29,e.t0=e.catch(22);case 31:case"end":return e.stop()}}),e,null,[[22,29]])})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),mt=n(569),bt=function(){var e=Object(v.a)(p.a.mark((function e(t,n,a,r,i,o,c){var l,u,s,m,b,v,y,g,h,O,j,k,A,x,S,T;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new Error("Wallet is not connected");case 2:return Object($e.a)({message:"Repaying funds...",description:"Please review transactions to approve.",type:"warn"}),l=[],u=[],s=[],e.next=8,t.getMinimumBalanceForRentExemption(N.a.span);case 8:return m=e.sent,e.next=11,w.d.findProgramAddress([o.info.lendingMarket.toBuffer()],I.a);case 11:return b=e.sent,v=Object(E.a)(b,1),y=v[0],g=tt(u,s,a,n.publicKey,r+m,l),h=Object(B.approve)(u,s,g,n.publicKey,r),l.push(h),e.next=19,ct(n.publicKey,n.publicKey,u,s,m,c.info.collateralMint,l);case 19:if(O=e.sent,j=o.info.dexMarketOption?o.info.dexMarket:c.info.dexMarket,k=f.d.get(j)){e.next=24;break}throw new Error("Dex market doesn't exist.");case 24:return A=f.d.get(c.info.lendingMarket),x=A.info.quoteMint.equals(o.info.liquidityMint)?null===k||void 0===k?void 0:k.info.asks:null===k||void 0===k?void 0:k.info.bids,S=nt(u,n.publicKey,l,I.a),u.push(Object(et.b)(o.pubkey,c.pubkey)),u.push(Object(mt.a)(r,g,O,o.pubkey,o.info.liquiditySupply,c.pubkey,c.info.collateralSupply,i.pubkey,o.info.lendingMarket,y,h.publicKey,j,x,S)),e.next=31,Object(d.c)(t,n,u.concat(s),l,!0);case 31:T=e.sent,Object($e.a)({message:"Funds liquidated.",type:"success",description:"Transaction - ".concat(T)});case 33:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o,c){return e.apply(this,arguments)}}(),pt=(n(814),n(443),function(e){return i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},i.a.createElement("h2",null,"Congratulations!"),i.a.createElement("div",null,"Your action has been successfully executed"),i.a.createElement("div",{className:"success-icon"}),i.a.createElement(l.b,{to:"/dashboard"},i.a.createElement(Ae.a,{type:"primary"},_e.b.DASHBOARD_ACTION)),i.a.createElement(Ae.a,{type:"text",onClick:e.onClose},_e.b.GO_BACK_ACTION))}),vt=function(){var e=Object(u.f)();return i.a.createElement(Ae.a,{type:"text",onClick:e.goBack},_e.b.GO_BACK_ACTION)},yt=n(74),Et=n(83),gt=n(100),ht=n(99),Ot=n(1168),jt=function(e){Object(gt.a)(n,e);var t=Object(ht.a)(n);function n(){var e;Object(yt.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onChange=function(t){var n=t.target.value;(/^-?\d*(\.\d*)?$/.test(n)||""===n||"-"===n)&&e.props.onChange(n)},e.onBlur=function(){var t=e.props,n=t.value,a=t.onBlur,r=t.onChange,i=n;void 0!==n&&null!==n&&(!n.charAt||"."!==n.charAt(n.length-1)&&"-"!==n||(i=n.slice(0,-1)),n.startsWith&&(n.startsWith(".")||n.startsWith("-."))&&(i=i.replace(".","0.")),i.replace&&(null===r||void 0===r||r(i.replace(/0*(\d+)/,"$1"))),a&&a())},e}return Object(Et.a)(n,[{key:"render",value:function(){return i.a.createElement(Ot.a,Object.assign({},this.props,{onChange:this.onChange,onBlur:this.onBlur,maxLength:25}))}}]),n}(i.a.Component),wt=(n(819),function(e){var t=oe(),n=Object(r.useState)(0),a=Object(E.a)(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){if(e){var n=f.d.byParser(B.LendingReserveParser).find((function(t){return t===e}))||"",a=f.d.get(n);if(a){var r=t.userDeposits.find((function(e){return e.reserve.info.liquidityMint.toBase58()===a.info.liquidityMint.toBase58()}));o(r?r.info.amount:0)}}else o(0)}),[e,t.userDeposits]),i}),kt=function(e){var t=e.useWalletBalance,n=e.reserve,a=e.showBalance,r=e.mintAddress,o=e.name,c=e.icon,l=Object(f.h)(r),u=Object(f.f)(r),s=wt(n),d=0,m=!1;return a&&(t&&u&&l?m=(d=u.info.amount.toNumber()/Math.pow(10,l.decimals))>0:n&&(m=(d=s)>0)),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{title:r,key:r,style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},i.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c||i.a.createElement(ze,{mintAddress:r}),o),a?i.a.createElement("span",{title:d.toString(),key:r,className:"token-balance"},"\xa0"," ",m?d<.001?"<0.001":d.toFixed(3):"-"):null))},At=Me.a.Option;function xt(e){var t,n,a,o,c,l=X(e.reserve.liquidityMint).balance,u=V().reserveAccounts,s=Object(d.e)().tokenMap,m=Object(r.useState)(),b=Object(E.a)(m,2),p=b[0],v=b[1],y=Object(r.useState)(0),g=Object(E.a)(y,2),h=g[0],j=g[1],w=Object(r.useState)(""),k=Object(E.a)(w,2),A=k[0],x=k[1],S=Object(r.useState)(_e.b.WALLET_BALANCE),T=Object(E.a)(S,2),N=T[0],I=T[1],B=wt(p);Object(r.useEffect)((function(){e.useWalletBalance?(j(l),I(_e.b.WALLET_BALANCE)):(j(B),I(_e.b.OYSTER_BALANCE))}),[l,B,e.useWalletBalance]);var L=f.d.get(e.reserve.lendingMarket);if(!L)return null;var M=!(null===(t=e.reserve)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.equals(null===L||void 0===L||null===(a=L.info)||void 0===a?void 0:a.quoteMint)),C=u.filter((function(t){return t.info!==e.reserve})).filter((function(e){return!M||e.info.liquidityMint.equals(L.info.quoteMint)}));if(!p&&e.useFirstReserve&&C.length){var _,R=C[0].pubkey.toBase58();v(R),null===(_=e.onCollateralReserve)||void 0===_||_.call(e,R)}var q=C.map((function(e){var t=e.info.liquidityMint.toBase58(),n=e.pubkey.toBase58(),a=Object(O.m)(s,t);return i.a.createElement(At,{key:n,value:n,name:a,title:n},i.a.createElement(kt,{key:e.info.liquidityMint.toBase58(),name:Object(O.m)(s,e.info.liquidityMint.toBase58()),mintAddress:e.info.liquidityMint.toBase58(),showBalance:!0,reserve:n,useWalletBalance:!1}))}));return i.a.createElement(Ge.a,{className:"ccy-input",style:{borderRadius:20},bodyStyle:{padding:0}},i.a.createElement("div",{className:"ccy-input-header"},i.a.createElement("div",{className:"ccy-input-header-left"},e.title),!e.hideBalance&&i.a.createElement("div",{className:"ccy-input-header-right",onClick:function(t){return e.onInputChange&&e.onInputChange(h)}},N,": ",h.toFixed(6))),i.a.createElement("div",{className:"ccy-input-header",style:{padding:"0px 10px 5px 7px"}},i.a.createElement(jt,{value:parseFloat(A||"0.00")===e.amount?A:null===(o=e.amount)||void 0===o||null===(c=o.toFixed(6))||void 0===c?void 0:c.toString(),onChange:function(t){e.onInputChange&&parseFloat(t)!==e.amount&&(t&&parseFloat(t)?e.onInputChange(parseFloat(t)):e.onInputChange(null)),x(t)},style:{fontSize:20,boxShadow:"none",borderColor:"transparent",outline:"transparent"},placeholder:"0.00"}),i.a.createElement("div",{className:"ccy-input-header-right",style:{display:"flex"}},e.showLeverageSelector&&i.a.createElement(Me.a,{size:"large",showSearch:!0,style:{width:80},placeholder:"CCY",value:e.leverage,onChange:function(t){e.onLeverage&&e.onLeverage(t)},notFoundContent:null,onSearch:function(t){e.onLeverage&&t.match(/^\d+$/)&&e.onLeverage(parseFloat(t))},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},[1,2,3,4,5].map((function(e){return i.a.createElement(At,{key:e,value:e,name:e+"x",title:e+"x"},i.a.createElement("div",{key:e,style:{display:"flex",alignItems:"center"}},e+"x"))}))),e.disabled?i.a.createElement(kt,{key:e.reserve.liquidityMint.toBase58(),name:Object(O.m)(s,e.reserve.liquidityMint.toBase58()),mintAddress:e.reserve.liquidityMint.toBase58(),showBalance:!1}):i.a.createElement(Me.a,{size:"large",showSearch:!0,style:{minWidth:150},placeholder:"CCY",value:p,onChange:function(t){e.onCollateralReserve&&e.onCollateralReserve(t),v(t)},filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},q))))}var St,Tt=n(1162),Nt=(n(820),function(e){return i.a.createElement(Tt.a,{onChange:e.onChange,className:"risk-slider",marks:_e.g,value:e.value})}),It=function(e){var t,n,a=Object(d.d)(),o=Object(s.b)().wallet,c=Object(r.useState)(""),l=Object(E.a)(c,2),u=l[0],m=l[1],b=Object(r.useState)("collateral"),y=Object(E.a)(b,2),g=y[0],h=y[1],j=Object(r.useState)(!1),w=Object(E.a)(j,2),k=w[0],A=w[1],x=Object(r.useState)(!1),S=Object(E.a)(x,2),T=S[0],N=S[1],I=e.reserve,L=Object(r.useState)(),M=Object(E.a)(L,2),C=M[0],_=M[1],R=Object(r.useMemo)((function(){var e=f.d.byParser(B.LendingReserveParser).find((function(e){return e===C}))||"";return f.d.get(e)}),[C]),q=U(I.info.liquidityMint.toBase58()).price,P=null===(t=U(null===R||void 0===R?void 0:R.info.liquidityMint.toBase58()))||void 0===t?void 0:t.price,D=Object(r.useMemo)((function(){return new Set([null===R||void 0===R?void 0:R.pubkey.toBase58()])}),[R]),W=(null===(n=oe(Object(r.useMemo)((function(){return new Set([])}),[]),D).userDeposits[0])||void 0===n?void 0:n.info.amount)||0,F=X(null===R||void 0===R?void 0:R.info.liquidityMint),K=F.accounts,G=F.balanceLamports,Q=Object(f.h)(null===R||void 0===R?void 0:R.info.liquidityMint),z=Object(O.i)(G,Q),Y=Object(r.useCallback)((function(e){var t=z+W;return h("collateral"),"string"===typeof e?parseFloat(e)/t*100:e*t/100}),[W,z]),V=ce(Y),H=V.value,J=V.setValue,Z=V.pct,$=V.setPct,ee=Object(r.useMemo)((function(){return Object(O.q)(parseFloat(H)-W,Q)}),[H,W,Q]);Object(r.useEffect)((function(){if(R&&"collateral"===g){var e=I.info.config.loanToValueRatio/100;if(H){var t=parseFloat(H);m((t*P*e/q).toString())}else m("")}}),[g,R,P,q,I,H,m]),Object(r.useEffect)((function(){if(R&&"borrow"===g){var e=I.info.config.loanToValueRatio/100;if(u){var t=parseFloat(u);J((t*q/e/P).toString())}else J("")}}),[g,R,P,q,I,u]);var te=ie(null===I||void 0===I?void 0:I.pubkey,null===R||void 0===R?void 0:R.pubkey).userObligationsByReserve,ne=X(null===R||void 0===R?void 0:R.info.collateralMint).accounts,ae=Object(r.useCallback)((function(){R&&(null===o||void 0===o?void 0:o.publicKey)&&(A(!0),Object(v.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(ee>0)){e.next=4;break}return e.next=4,ut(K[0],ee,R.info,R.pubkey,a,o);case 4:return e.next=6,lt(a,o,ne[0],parseFloat(u),B.BorrowAmountType.LiquidityBorrowAmount,I,R,te.length>0?te[0].obligation.account:void 0,te.length>0?te[0].userAccounts[0].pubkey:void 0);case 6:m(""),J(""),N(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Object($e.a)({message:"Unable to borrow.",type:"error",description:e.t0.message});case 14:return e.prev=14,A(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})))())}),[a,o,u,m,J,H,R,Q,I,ne,K,te,A,N]);return i.a.createElement(Ge.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},T?i.a.createElement(pt,{onClose:function(){return N(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},ee>0&&i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(Ze.a,{message:"".concat(_e.b.NO_ENOUGH_COLLATERAL_MESSAGE),type:"info"})),i.a.createElement("div",{className:"borrow-input-title"},_e.b.BORROW_QUESTION),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(xt,{title:"Collateral (estimated)",reserve:I.info,amount:parseFloat(H)||0,onInputChange:function(e){J((null===e||void 0===e?void 0:e.toString())||""),h("collateral")},onCollateralReserve:function(t){e.onCollateralReserve&&e.onCollateralReserve(t),_(t)},useFirstReserve:!0})),i.a.createElement(Nt,{value:Z,onChange:function(e){return $(e)}}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",marginBottom:20}},i.a.createElement(xt,{title:"Borrow Amount",reserve:I.info,amount:parseFloat(u)||0,onInputChange:function(e){m((null===e||void 0===e?void 0:e.toString())||""),h("borrow")},disabled:!0,hideBalance:!0})),i.a.createElement(Pe,{size:"large",type:"primary",onClick:ae,loading:k,disabled:0===ne.length},0===ne.length?_e.b.NO_COLLATERAL:_e.b.BORROW_ACTION),i.a.createElement(vt,null)))},Bt=n(1158),Lt=Bt.a.Text;!function(e){e.Deposit="deposit",e.Borrow="borrow"}(St||(St={}));var Mt=function(e){var t=e.reserve.info,n=e.mode,a=J(null===t||void 0===t?void 0:t.liquidityMint),r=Object(f.h)(t.liquidityMint),o=Object(O.i)(t.state.availableLiquidity,r),c=Object(Q.k)(t),u=Object(Q.j)(t),s=Object(Q.l)(t),d=t.config.liquidationThreshold/100,m=t.config.liquidationBonus/100,b=t.config.loanToValueRatio/100,p=null;return n===St.Deposit?p=i.a.createElement("div",{className:"card-row"},i.a.createElement(Lt,{type:"secondary",className:"card-cell "},_e.b.TABLE_TITLE_DEPOSIT_APY,":"),i.a.createElement("div",{className:"card-cell "},O.f.format(c))):n===St.Borrow&&(p=i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-row"},i.a.createElement(Lt,{type:"secondary",className:"card-cell "},_e.b.TABLE_TITLE_BORROW_APY,":"),i.a.createElement("div",{className:"card-cell "},O.f.format(u))))),i.a.createElement(Ge.a,{className:e.className,title:i.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},i.a.createElement(l.b,{to:"/reserve/".concat(e.reserve.pubkey)},i.a.createElement(ze,{mintAddress:null===t||void 0===t?void 0:t.liquidityMint,style:{width:30,height:30}})," ",a," Reserve Overview"))},i.a.createElement("div",{className:"card-row"},i.a.createElement(Lt,{type:"secondary",className:"card-cell "},"Utilization rate:"),i.a.createElement("div",{className:"card-cell "},O.f.format(s))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Lt,{type:"secondary",className:"card-cell "},"Available liquidity:"),i.a.createElement("div",{className:"card-cell "},O.e.format(o)," ",a)),p,i.a.createElement("div",{className:"card-row"},i.a.createElement(Lt,{type:"secondary",className:"card-cell "},"Maximum LTV:"),i.a.createElement("div",{className:"card-cell "},O.f.format(b))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Lt,{type:"secondary",className:"card-cell "},"Liquidation threshold:"),i.a.createElement("div",{className:"card-cell "},O.f.format(d))),i.a.createElement("div",{className:"card-row"},i.a.createElement(Lt,{type:"secondary",className:"card-cell "},"Liquidation penalty:"),i.a.createElement("div",{className:"card-cell "},O.f.format(m))))},Ct=function(){var e=Object(u.h)().id,t=H(e),n=re(),a=n.userObligations,o=n.totalInQuote,c=Object(d.e)().tokenMap,l=ue(e),s=l.totalInQuote,m=l.utilization,b=Object(r.useState)(""),p=Object(E.a)(b,2),v=p[0],y=p[1],g=Object(r.useMemo)((function(){var e=f.d.byParser(B.LendingReserveParser).find((function(e){return e===v}))||"";return f.d.get(e)}),[v]),h=null===g||void 0===g?void 0:g.info.liquidityMint.toBase58(),j=Object(f.h)(h),w=Object(f.f)(h),k=Object(O.m)(c,h);if(!t)return null;var A=0;return w&&j&&(A=w.info.amount.toNumber()/Math.pow(10,j.decimals)),i.a.createElement("div",{className:"borrow-reserve"},i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{xs:24,xl:4},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:_e.b.BORROWED_VALUE,value:o,precision:2,prefix:"$"}))),i.a.createElement(Ke.a,{xs:24,xl:4},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:_e.b.BORROWING_POWER_USED,value:100*m,precision:2,suffix:"%"}))),i.a.createElement(Ke.a,{xs:24,xl:4},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:_e.b.BORROWING_POWER_VALUE,value:s,valueStyle:{color:"#3fBB00"},precision:2,prefix:"$"}))),i.a.createElement(Ke.a,{xs:24,xl:4},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:_e.b.WALLET_BALANCE,value:A,valueStyle:{color:"#3fBB00"},precision:2,suffix:k}))),i.a.createElement(Ke.a,{xs:24,xl:8},i.a.createElement(Ge.a,null,i.a.createElement(Ve,{title:"Your Loans",items:a,getPct:function(e){return e.obligation.info.borrowedInQuote/o},name:function(e){return e.obligation.info.repayName}})))),i.a.createElement(Fe.a,{gutter:_e.a,style:{flex:1}},i.a.createElement(Ke.a,{xs:24,xl:16},i.a.createElement(It,{onCollateralReserve:y,className:"card-fill",reserve:t})),i.a.createElement(Ke.a,{xs:24,xl:8},i.a.createElement(Mt,{className:"card-fill",reserve:t,mode:St.Borrow}))))},_t=function(e){var t=e.obligation,n=f.d.get(t.info.borrowReserve),a=f.d.get(t.info.collateralReserve),o=Object(f.h)(n.info.liquidityMint),c=Object(f.h)(a.info.liquidityMint),u=Object(O.i)(Object(O.s)(t.info.borrowAmountWad),o),s=Object(r.useMemo)((function(){return Object(Q.j)(n.info)}),[n]),d=Object(Q.m)(t.info.depositedCollateral,n.info),m=Object(O.i)(d,c),b=J(null===n||void 0===n?void 0:n.info.liquidityMint),p=J(null===a||void 0===a?void 0:a.info.liquidityMint);return i.a.createElement("div",{className:"dashboard-item"},i.a.createElement("span",{style:{display:"flex",marginLeft:5}},i.a.createElement("div",{style:{display:"flex"},title:"".concat(p,"\u2192").concat(b)},i.a.createElement(ze,{mintAddress:null===a||void 0===a?void 0:a.info.liquidityMint,style:{marginRight:"-0.5rem"}}),i.a.createElement(ze,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint}))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(u))," ",b),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(t.info.borrowedInQuote)))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(m))," ",p),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(t.info.collateralInQuote)))),i.a.createElement("div",null,O.f.format(s)),i.a.createElement("div",{style:{color:Object(Q.o)(t.info.health)}},O.f.format(t.info.ltv/100)),i.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement(l.b,{to:"/borrow/".concat(b)},i.a.createElement(Ae.a,{type:"primary"},i.a.createElement("span",null,"Borrow"))),i.a.createElement(l.b,{to:"/repay/loan/".concat(t.account.pubkey.toBase58())},i.a.createElement(Ae.a,{type:"text"},i.a.createElement("span",null,"Repay")))))},Rt=function(){var e=re(),t=e.userObligations,n=e.totalInQuote;return i.a.createElement(Ge.a,{title:i.a.createElement("div",{className:"dashboard-title"},i.a.createElement("div",null,_e.b.DASHBOARD_TITLE_LOANS),i.a.createElement("div",null,i.a.createElement("span",null,_e.b.TOTAL_TITLE,": "),"$",O.e.format(n)))},i.a.createElement(Ve,{items:t,getPct:function(e){return e.obligation.info.borrowedInQuote/n},name:function(e){return e.obligation.info.repayName}}),i.a.createElement("div",{className:"dashboard-item dashboard-header"},i.a.createElement("div",null,_e.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,_e.b.TABLE_TITLE_YOUR_LOAN_BALANCE),i.a.createElement("div",null,_e.b.TABLE_TITLE_COLLATERAL_BALANCE),i.a.createElement("div",null,_e.b.TABLE_TITLE_APY),i.a.createElement("div",null,_e.b.TABLE_TITLE_LTV),i.a.createElement("div",null)),t.map((function(e){return i.a.createElement(_t,{key:e.obligation.account.pubkey.toBase58(),obligation:e.obligation})})))},qt=function(e){var t=e.userDeposit,n=t.reserve,a=t.info,o=n.info.liquidityMint,c=J(o),u=Object(r.useMemo)((function(){return Object(Q.k)(n.info)}),[n]);return i.a.createElement("div",{className:"dashboard-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(ze,{mintAddress:o}),c),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(a.amount))," ",c),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(a.amountInQuote)))),i.a.createElement("div",null,O.f.format(u)),i.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},i.a.createElement(l.b,{to:"/deposit/".concat(c)},i.a.createElement(Ae.a,{type:"primary"},i.a.createElement("span",null,_e.b.DEPOSIT_ACTION))),i.a.createElement(l.b,{to:"/withdraw/".concat(c)},i.a.createElement(Ae.a,{type:"text"},i.a.createElement("span",null,_e.b.WITHDRAW_ACTION)))))},Pt=function(){var e=oe(),t=e.userDeposits,n=e.totalInQuote;return i.a.createElement(Ge.a,{title:i.a.createElement("div",{className:"dashboard-title"},i.a.createElement("div",null,_e.b.DASHBOARD_TITLE_DEPOSITS),i.a.createElement("div",null,i.a.createElement("span",null,_e.b.TOTAL_TITLE,": "),"$",O.e.format(n)))},i.a.createElement(Ve,{items:t,getPct:function(e){return e.info.amountInQuote/n},name:function(e){return e.info.name}}),i.a.createElement("div",{className:"dashboard-item dashboard-header"},i.a.createElement("div",null,_e.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,_e.b.TABLE_TITLE_DEPOSIT_BALANCE),i.a.createElement("div",null,_e.b.TABLE_TITLE_APY),i.a.createElement("div",null)),t.map((function(e){return i.a.createElement(qt,{key:e.account.pubkey.toBase58(),userDeposit:e})})))},Dt=(n(821),function(){return i.a.createElement(Ge.a,{bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("strong",null,_e.b.NOTHING_BORROWED),i.a.createElement("br",null),i.a.createElement("p",null,_e.b.NOTHING_BORROWED_MESSAGE),i.a.createElement(l.b,{to:"/borrow"},i.a.createElement(Ae.a,{type:"primary",size:"large"},i.a.createElement("span",null,_e.b.BORROW_NOW)))))}),Wt=function(){var e=Object(s.b)().connected,t=re().userObligations,n=oe().userDeposits;return i.a.createElement("div",{className:"dashboard-container"},e?0===n.length&&0===t.length?i.a.createElement("div",{className:"dashboard-info"},i.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),_e.b.NO_LOANS_NO_DEPOSITS):i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{md:24,xl:12,span:24},n.length>0?i.a.createElement(Pt,null):i.a.createElement(Ge.a,null,_e.b.NO_DEPOSITS)),i.a.createElement(Ke.a,{md:24,xl:12,span:24},t.length>0?i.a.createElement(Rt,null):i.a.createElement(Dt,null))):i.a.createElement("div",{className:"dashboard-info"},i.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),_e.b.DASHBOARD_INFO))},Ut=function(e){var t=J(e.reserve.liquidityMint),n=X(e.reserve.liquidityMint),a=n.balance,r=n.balanceInUSD,o=Z(e.reserve),c=o.balance,u=o.balanceInUSD,s=Object(Q.k)(e.reserve);return i.a.createElement(l.b,{to:"/deposit/".concat(t)},i.a.createElement("div",{className:"deposit-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(ze,{mintAddress:e.reserve.liquidityMint}),t),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(a))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(r)))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(c))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(u)))),i.a.createElement("div",null,O.f.format(s)),i.a.createElement("div",null,i.a.createElement(Ae.a,{type:"primary"},i.a.createElement("span",null,_e.b.DEPOSIT_ACTION)))))},Ft=(n(822),function(){var e=V().reserveAccounts;return i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Ge.a,null,i.a.createElement("div",{className:"deposit-item deposit-header"},i.a.createElement("div",null,"Asset"),i.a.createElement("div",null,"Your wallet balance"),i.a.createElement("div",null,"Your balance in Oyster"),i.a.createElement("div",null,"APY"),i.a.createElement("div",null)),e.map((function(e){return i.a.createElement(Ut,{key:e.pubkey.toBase58(),reserve:e.info,address:e.pubkey})}))))}),Kt=(n(823),n(824),function(e){var t=Object(d.d)(),n=Object(s.b)().wallet,a=Object(r.useState)(!1),o=Object(E.a)(a,2),c=o[0],l=o[1],u=Object(r.useState)(!1),f=Object(E.a)(u,2),m=f[0],b=f[1],y=e.reserve,g=e.address,h=X(null===y||void 0===y?void 0:y.liquidityMint),O=h.accounts,j=h.balance,w=h.balanceLamports,k=Object(r.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/j*100:e*j/100}),[j]),A=ce(k),x=A.value,S=A.setValue,T=A.pct,N=A.setPct,I=A.type,B=Object(r.useCallback)((function(){(null===n||void 0===n?void 0:n.publicKey)&&(l(!0),Object(v.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ut(O[0],I===ee.Percent?T*w/100:Math.ceil(w*(parseFloat(x)/j)),y,g,t,n);case 3:S(""),b(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),Object($e.a)({message:"Error in deposit.",type:"error",description:e.t0.message});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,7,11,14]])})))())}),[t,S,w,j,n,x,T,I,y,O,g]);return i.a.createElement(Ge.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},m?i.a.createElement(pt,{onClose:function(){return b(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"deposit-input-title"},_e.b.DEPOSIT_QUESTION),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(xt,{title:"Amount",reserve:y,amount:parseFloat(x)||0,onInputChange:function(e){S((null===e||void 0===e?void 0:e.toString())||"")},disabled:!0,hideBalance:!0})),i.a.createElement(Tt.a,{marks:_e.f,value:T,onChange:N}),i.a.createElement(Pe,{size:"large",type:"primary",onClick:B,loading:c,disabled:0===O.length},_e.b.DEPOSIT_ACTION)))}),Gt=(n(825),function(e){var t=J(e.reserve.liquidityMint),n=X(e.reserve.liquidityMint).balance,a=Z(e.reserve).balance,o=Object(r.useMemo)((function(){return Object(Q.k)(e.reserve)}),[e.reserve]);return i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,{className:e.className},i.a.createElement(Qe.a,{title:"Your balance in Oyster",value:O.e.format(a),suffix:t}))),i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,{className:e.className},i.a.createElement(Qe.a,{title:"Your wallet balance",value:O.e.format(n),suffix:t}))),i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,{className:e.className},i.a.createElement(Qe.a,{title:"Health Factor",value:"--"}))),i.a.createElement(Ke.a,{xs:24,xl:9},i.a.createElement(Ge.a,{className:e.className},i.a.createElement(Qe.a,{title:"APY",value:O.f.format(o)}))))}),Qt=function(){var e=H(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?i.a.createElement("div",{className:"borrow-reserve"},i.a.createElement(Gt,{className:"card-fill",reserve:t,address:e.pubkey}),i.a.createElement(Fe.a,{gutter:_e.a,style:{flex:1}},i.a.createElement(Ke.a,{xs:24,xl:15},i.a.createElement(Kt,{className:"card-fill",reserve:t,address:e.pubkey})),i.a.createElement(Ke.a,{xs:24,xl:9},i.a.createElement(Mt,{className:"card-fill",reserve:e,mode:St.Deposit})))):null},zt=(n(826),Bt.a.Text),Yt=function(e){var t=e.reserve,n=e.address,a=J(null===t||void 0===t?void 0:t.liquidityMint),o=X(e.reserve.liquidityMint),c=o.balance,u=o.balanceInUSD,s=Z(e.reserve),m=s.balance,b=s.balanceInUSD,y=function(e){var t=Object(d.d)(),n=ie(e).userObligationsByReserve,a=Object(r.useState)({borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0}),i=Object(E.a)(a,2),o=i[0],c=i[1],l=H(e),u=Object(f.h)(null===l||void 0===l?void 0:l.info.liquidityMint);return Object(r.useEffect)((function(){c({borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0}),Object(v.a)(p.a.mark((function e(){var a,r,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.e)(t,n.map((function(e){return e.obligation.info.tokenMint.toBase58()})),"single");case 2:a=e.sent,r=a.keys,a.array.forEach((function(e,t){var n=r[t];f.d.add(new w.d(n),e,f.b)})),i={borrowedLamports:0,borrowedInUSD:0,colateralInUSD:0,ltv:0,health:0},o=0,n.forEach((function(e){var t=Object(O.s)(e.obligation.info.borrowAmountWad).toNumber(),n=e.userAccounts.reduce((function(e,t){return e+t.info.amount.toNumber()}),0),a=f.d.get(e.obligation.info.tokenMint);i.borrowedLamports+=t*(n/(null===a||void 0===a?void 0:a.info.supply.toNumber())),i.borrowedInUSD+=e.obligation.info.borrowedInQuote,i.colateralInUSD+=e.obligation.info.collateralInQuote,o=e.obligation.info.liquidationThreshold}),0),1===n.length?(i.ltv=n[0].obligation.info.ltv,i.health=n[0].obligation.info.health):(i.ltv=100*i.borrowedInUSD/i.colateralInUSD,i.health=i.colateralInUSD*o/100/i.borrowedInUSD,i.health=Number.isFinite(i.health)?i.health:0),c(i);case 11:case"end":return e.stop()}}),e)})))()}),[t,n,c]),Object(A.a)({borrowed:Object(O.i)(o.borrowedLamports,u)},o)}(n),g=y.borrowed,h=y.borrowedInUSD,j=y.ltv,k=y.health,x=ue(n),S=x.totalInQuote,T=x.borrowingPower,N=ie(n).userObligationsByReserve;return i.a.createElement(Ge.a,{className:e.className,title:i.a.createElement("div",{style:{display:"flex",alignItems:"center",fontSize:"1.2rem",justifyContent:"center"}},"Your Information")},i.a.createElement("h3",null,_e.b.BORROWS),i.a.createElement("div",{className:"card-row"},i.a.createElement(zt,{type:"secondary",className:"card-cell "},"Borrowed"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(g))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(h))))),i.a.createElement("div",{className:"card-row"},i.a.createElement(zt,{type:"secondary",className:"card-cell "},_e.b.TABLE_TITLE_HEALTH,":"),i.a.createElement("div",{className:"card-cell "},k.toFixed(2))),i.a.createElement("div",{className:"card-row"},i.a.createElement(zt,{type:"secondary",className:"card-cell "},_e.b.LOAN_TO_VALUE,":"),i.a.createElement("div",{className:"card-cell "},O.e.format(j))),i.a.createElement("div",{className:"card-row"},i.a.createElement(zt,{type:"secondary",className:"card-cell "},"Available to you:"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(T))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(S))))),i.a.createElement("h3",null,_e.b.DEPOSITS),i.a.createElement("div",{className:"card-row"},i.a.createElement(zt,{type:"secondary",className:"card-cell "},_e.b.WALLET_BALANCE,":"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(c))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(u))))),i.a.createElement("div",{className:"card-row"},i.a.createElement(zt,{type:"secondary",className:"card-cell "},"You already deposited:"),i.a.createElement("div",{className:"card-cell "},i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(m))," ",a),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(b))))),i.a.createElement("div",{className:"card-row",style:{marginTop:20,justifyContent:"space-evenly"}},i.a.createElement(l.b,{to:"/deposit/".concat(a)},i.a.createElement(Ae.a,null,_e.b.DEPOSIT_ACTION)),i.a.createElement(l.b,{to:"/borrow/".concat(a)},i.a.createElement(Ae.a,null,_e.b.BORROW_ACTION)),i.a.createElement(l.b,{to:"/withdraw/".concat(a)},i.a.createElement(Ae.a,null,_e.b.WITHDRAW_ACTION)),!!N.length&&i.a.createElement(l.b,{to:"/repay/loan/".concat(N[0].obligation.account.pubkey.toBase58())},i.a.createElement(Ae.a,null,_e.b.REPAY_ACTION))))},Vt=(n(827),n(828),function(e){var t=Object(r.useRef)(),n=Object(r.useRef)(),a=Object(r.useState)(1),o=Object(E.a)(a,2),c=o[0],l=o[1],u=e.percent,s=e.title,d=e.style,f=e.color,m=e.showPercent,b=d.height,p=Object(r.useCallback)((function(){var e,t=(null===(e=n.current)||void 0===e?void 0:e.parentNode).offsetWidth;l(t<b?t/b:1)}),[b]);return Object(r.useEffect)((function(){return p(),window.addEventListener("resize",p),function(){window.removeEventListener("resize",p)}}),[p]),Object(r.useEffect)((function(){var e=0;return Ht(t.current,u,(function(t){e=t}),f),function(){cancelAnimationFrame(e)}}),[u,f]),i.a.createElement("div",{className:"waterWave",ref:n,style:{transform:"scale(".concat(c,")")}},i.a.createElement("div",{style:{width:b,height:b,overflow:"hidden"}},i.a.createElement("canvas",{className:"waterWaveCanvasWrapper",ref:t,width:2*b,height:2*b})),i.a.createElement("div",{className:"text",style:{width:b}},s,i.a.createElement("h4",null,m&&"".concat(u.toFixed(2),"%"))))}),Ht=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#1890FF",r=t/100;if(e&&r){var i=e.getContext("2d");if(i){var o=e.width,c=e.height,l=o/2,u=2,s=l-u;i.beginPath(),i.lineWidth=2*u;var d=o-u,f=d/8,m=.2,b=m,p=u,v=0,y=0,E=.005,g=l-u,h=-Math.PI/2,O=!0,j=[l+g*Math.cos(h),l+g*Math.sin(h)];i.strokeStyle=a,i.moveTo(j[0],j[1]);var w=function(){i.beginPath(),i.save();for(var e=[],t=p;t<=p+d;t+=20/d){var n=v+(p+t)/f,a=Math.sin(n)*b,r=t,o=2*s*(1-y)+(l-s)-f*a;i.lineTo(r,o),e.push([r,o])}var u=e.shift();if(u){i.lineTo(p+d,c),i.lineTo(p,c),i.lineTo(u[0],u[1]);var m=i.createLinearGradient(0,0,0,c);m.addColorStop(0,"#ffffff"),m.addColorStop(1,"#1890FF"),i.fillStyle=m,i.fill(),i.restore()}},k=function e(){if(i.clearRect(0,0,o,c),O)O=!1,i.globalCompositeOperation="destination-over",i.beginPath(),i.save(),i.arc(l,l,l-3*u,0,2*Math.PI,!0),i.stroke(),i.restore(),i.clip(),i.fillStyle="#1890FF";else{if(r>=.85){if(b>m/4)b-=.01*m}else if(r<=.1){if(b<1.5*m)b+=.01*m}else{if(b<=m)b+=.01*m;if(b>=m)b-=.01*m}r-y>0&&(y+=E),r-y<0&&(y-=E),v+=.07,w()}n(requestAnimationFrame(e))};k()}}},Jt=function(e){var t,n=null===(t=e.reserve.liquidityMint)||void 0===t?void 0:t.toBase58(),a=Object(f.h)(n),o=Object(O.i)(e.reserve.state.availableLiquidity,a),c=Object(r.useMemo)((function(){return Object(O.i)(Object(O.s)(e.reserve.state.borrowedLiquidityWad),a)}),[e.reserve,a]),l=100*c/(o+c);return i.a.createElement(Vt,{style:{height:300},showPercent:!1,title:i.a.createElement(Qe.a,{title:"Utilization",suffix:"%",value:O.e.format(l,!0),precision:3,prefix:Object(O.n)(l)?"<":""}),percent:l})},Xt=function(e){var t,n=null===(t=e.reserve.liquidityMint)||void 0===t?void 0:t.toBase58(),a=Object(f.h)(n),o=U(n).price,c=Object(O.i)(e.reserve.state.availableLiquidity,a),l=o*c,u=Object(r.useMemo)((function(){return Object(O.i)(Object(O.s)(e.reserve.state.borrowedLiquidityWad),a)}),[e.reserve,a]),s=o*u,d=Object(r.useMemo)((function(){return Object(Q.k)(e.reserve)}),[e.reserve]),m=e.reserve.config.liquidationThreshold,b=e.reserve.config.liquidationBonus,p=e.reserve.config.loanToValueRatio;return i.a.createElement(Ge.a,{className:e.className,title:i.a.createElement(i.a.Fragment,null,i.a.createElement(ze,{style:{marginRight:0,marginTop:0,position:"absolute",left:15},mintAddress:n,size:30}),_e.b.RESERVE_STATUS_TITLE),bodyStyle:{display:"flex",justifyContent:"center",alignItems:"center"}},i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{span:12},i.a.createElement(Qe.a,{title:"Available Liquidity",value:c,valueRender:function(e){return i.a.createElement("div",null,e,i.a.createElement("div",{className:"dashboard-amount-quote-stat"},"$",O.e.format(l)))},precision:2})),i.a.createElement(Ke.a,{span:12},i.a.createElement(Qe.a,{title:"Total Borrowed",value:u,valueRender:function(e){return i.a.createElement("div",null,e,i.a.createElement("div",{className:"dashboard-amount-quote-stat"},"$",O.e.format(s)))},precision:2}))),i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{span:24,style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement(Jt,{reserve:e.reserve}))),i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{span:6},i.a.createElement(Qe.a,{title:_e.b.MAX_LTV,className:"small-statisitc",value:p,precision:2,suffix:"%"})),i.a.createElement(Ke.a,{span:6},i.a.createElement(Qe.a,{title:_e.b.LIQUIDATION_THRESHOLD,className:"small-statisitc",value:m,precision:2,suffix:"%"})),i.a.createElement(Ke.a,{span:6},i.a.createElement(Qe.a,{title:_e.b.LIQUIDATION_PENALTY,className:"small-statisitc",value:b,precision:2,suffix:"%"})),i.a.createElement(Ke.a,{span:6},i.a.createElement(Qe.a,{title:_e.b.TABLE_TITLE_DEPOSIT_APY,className:"small-statisitc",value:O.e.format(100*d,!0),precision:3,prefix:Object(O.n)(100*d)?"<":"",suffix:"%"})))))},Zt=function(){var e=H(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{sm:24,md:12,lg:14,xl:15,xxl:18},i.a.createElement(Xt,{reserve:t,address:e.pubkey})),i.a.createElement(Ke.a,{sm:24,md:12,lg:10,xl:9,xxl:6},i.a.createElement(Yt,{className:"user-lending-card",reserve:t,address:e.pubkey})))):null},$t=(n(829),n(830),function(e){var t=Object(d.d)(),n=Object(s.b)().wallet,a=Object(r.useState)(!1),o=Object(E.a)(a,2),c=o[0],l=o[1],u=Object(r.useState)(!1),f=Object(E.a)(u,2),m=f[0],b=f[1],y=e.reserve,g=e.address,h=X(null===y||void 0===y?void 0:y.collateralMint),O=h.balanceLamports,j=h.accounts,w=Z(y).balance,k=Object(r.useCallback)((function(e){return"string"===typeof e?parseFloat(e)/w*100:e*w/100}),[w]),A=ce(k),x=A.value,S=A.setValue,T=A.pct,N=A.setPct,I=A.type,B=Object(r.useCallback)((function(){(null===n||void 0===n?void 0:n.publicKey)&&(l(!0),Object(v.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Math.min(I===ee.Percent?T*O/100:Math.ceil(O*(parseFloat(x)/w)),O),e.next=4,ft(j[0],a,y,g,t,n);case 4:S(""),b(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Object($e.a)({message:"Unable to withdraw.",type:"error",description:e.t0.message});case 11:return e.prev=11,l(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))())}),[g,w,O,t,j,T,y,S,I,x,n,null===n||void 0===n?void 0:n.publicKey]);return i.a.createElement(Ge.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},m?i.a.createElement(pt,{onClose:function(){return b(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"withdraw-input-title"},_e.b.WITHDRAW_QUESTION),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(xt,{title:"Amount",reserve:y,amount:parseFloat(x)||0,onInputChange:function(e){S((null===e||void 0===e?void 0:e.toString())||"")},disabled:!0,hideBalance:!0})),i.a.createElement(Tt.a,{marks:_e.f,value:T,onChange:N}),i.a.createElement(Pe,{size:"large",type:"primary",onClick:B,loading:c,disabled:0===j.length},0===j.length?_e.b.NO_COLLATERAL:_e.b.WITHDRAW_ACTION)))}),en=function(){var e=H(Object(u.h)().id),t=null===e||void 0===e?void 0:e.info;return t&&e?i.a.createElement("div",{className:"deposit-reserve"},i.a.createElement(Gt,{className:"deposit-reserve-item",reserve:t,address:e.pubkey}),i.a.createElement("div",{className:"deposit-reserve-container"},i.a.createElement($t,{className:"deposit-reserve-item deposit-reserve-item-left",reserve:t,address:e.pubkey}),i.a.createElement(Mt,{className:"deposit-reserve-item deposit-reserve-item-right",reserve:e,mode:St.Deposit}))):null},tn=function(){var e=Object(d.d)(),t=Object(s.b)().wallet,n=Object(r.useCallback)((function(){(null===t||void 0===t?void 0:t.publicKey)&&e.requestAirdrop(t.publicKey,2*w.c).then((function(){Object($e.a)({message:_e.b.ACCOUNT_FUNDED,type:"success"})}))}),[t,null===t||void 0===t?void 0:t.publicKey,e]);return i.a.createElement("div",{className:"flexColumn",style:{flex:1}},i.a.createElement(Ge.a,{title:"Faucet",bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"},style:{flex:1}},i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"}},i.a.createElement("div",{className:"deposit-input-title",style:{margin:10}},_e.b.FAUCET_INFO),i.a.createElement(Pe,{type:"primary",onClick:n},_e.b.GIVE_SOL))))},nn=(n(831),function(e){var t,n=Object(d.d)(),a=Object(s.b)().wallet,o=Object(r.useState)("repay"),c=Object(E.a)(o,2),l=c[0],u=c[1],m=Object(r.useState)(!1),b=Object(E.a)(m,2),y=b[0],g=b[1],h=Object(r.useState)(!1),j=Object(E.a)(h,2),w=j[0],k=j[1],A=Object(r.useState)(""),x=Object(E.a)(A,2),S=x[0],T=x[1],N=e.borrowReserve,I=e.obligation,B=Object(f.h)(N.info.liquidityMint),L=X(N.info.liquidityMint).balance,M=Object(O.s)(I.info.borrowAmountWad).toNumber(),C=Object(O.i)(M,B),_=e.collateralReserve,R=X(N.info.liquidityMint).accounts,q=function(e){var t=Object(z.a)().userAccounts,n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),a=t.findIndex((function(e){return e.info.mint.toBase58()===n}));if(-1!==a)return t[a]}(null===I||void 0===I?void 0:I.info.tokenMint),P=Object(r.useCallback)((function(e){var t=Math.min(L||1/0,C);return u("repay"),"string"===typeof e?parseFloat(e)/t*100:e*t/100}),[C,L]),D=ce(P),W=D.value,F=D.setValue,K=D.pct,G=D.setPct,Q=D.type,Y=Object(r.useCallback)((function(){_&&I&&N&&q&&(null===a||void 0===a?void 0:a.publicKey)&&(g(!0),Object(v.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Q===ee.Percent?K*M/100:Math.ceil(M*(parseFloat(W)/C)),e.next=4,dt(R[0],t,I.account,q,N,_,n,a);case 4:F(""),T(""),k(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Object($e.a)({message:"Unable to repay loan.",type:"error",description:e.t0.message});case 12:return e.prev=12,g(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))())}),[C,M,_,n,R,I,q,K,N,F,Q,W,a]),V=null===(t=U(null===_||void 0===_?void 0:_.info.liquidityMint.toBase58()))||void 0===t?void 0:t.price;Object(r.useEffect)((function(){if(_&&"repay"===l){var e=I.info.collateralInQuote/V;if(W){var t=parseFloat(W)/C*100;T((t*e/100).toString())}else T("")}}),[C,V,_,l,I.info.collateralInQuote,W]),Object(r.useEffect)((function(){if(_&&"collateral"===l){var e=I.info.collateralInQuote/V;if(S){var t=parseFloat(S)/e*100;F((t*C/100).toString())}else F("")}}),[C,V,_,S,l,I.info.collateralInQuote,F]);return i.a.createElement(Ge.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},w?i.a.createElement(pt,{onClose:function(){return k(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"repay-input-title"},_e.b.REPAY_QUESTION),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(xt,{title:"Repay Amount",reserve:N.info,amount:parseFloat(W)||0,onInputChange:function(e){F((null===e||void 0===e?void 0:e.toString())||""),u("repay")},disabled:!0,useWalletBalance:!0})),i.a.createElement(Tt.a,{marks:_e.f,value:K,onChange:G}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",marginBottom:20}},i.a.createElement(xt,{title:"Collateral Amount (estimated)",reserve:null===_||void 0===_?void 0:_.info,amount:parseFloat(S)||0,onInputChange:function(e){T((null===e||void 0===e?void 0:e.toString())||""),u("collateral")},disabled:!0,hideBalance:!0})),i.a.createElement(Pe,{type:"primary",size:"large",onClick:Y,loading:y,disabled:0===R.length},_e.b.REPAY_ACTION)))}),an=(n(832),function(){var e=Object(u.h)(),t=e.reserve,n=e.obligation,a=ae(n),r=n?null===a||void 0===a?void 0:a.info.borrowReserve:t,o=H(r),c=H(n?null===a||void 0===a?void 0:a.info.collateralReserve:t),l=re(),s=l.userObligations,d=l.totalInQuote,f=ue(r),m=f.totalInQuote,b=f.utilization;return(null===o||void 0===o?void 0:o.info)&&o&&a&&c?i.a.createElement("div",{className:"repay-reserve"},i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:_e.b.BORROWED_VALUE,value:d,precision:2,prefix:"$"}))),i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:_e.b.BORROWING_POWER_USED,value:100*b,precision:2,suffix:"%"}))),i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:_e.b.BORROWING_POWER_VALUE,value:m,valueStyle:{color:"#3fBB00"},precision:2,prefix:"$"}))),i.a.createElement(Ke.a,{xs:24,xl:9},i.a.createElement(Ge.a,null,i.a.createElement(Ve,{title:"Your Loans",items:s,getPct:function(e){return e.obligation.info.borrowedInQuote/d},name:function(e){return e.obligation.info.repayName}})))),i.a.createElement(Fe.a,{gutter:_e.a,style:{flex:1}},i.a.createElement(Ke.a,{xs:24,xl:15},i.a.createElement(nn,{className:"card-fill",borrowReserve:o,collateralReserve:c,obligation:a})),i.a.createElement(Ke.a,{xs:24,xl:9},i.a.createElement(Mt,{className:"card-fill",reserve:o,mode:St.Borrow})))):null}),rn=function(e){var t=e.item.info,n=f.d.get(t.borrowReserve),a=f.d.get(t.collateralReserve),o=Object(f.h)(n.info.liquidityMint),c=Object(f.h)(a.info.liquidityMint),u=Object(O.i)(Object(O.s)(t.borrowAmountWad),o),s=Object(r.useMemo)((function(){return Object(Q.j)(n.info)}),[n]),d=Object(Q.m)(t.depositedCollateral,n.info),m=Object(O.i)(d,c),b=J(null===n||void 0===n?void 0:n.info.liquidityMint),p=J(null===a||void 0===a?void 0:a.info.liquidityMint);return i.a.createElement(l.b,{to:"/liquidate/".concat(e.item.account.pubkey.toBase58())},i.a.createElement("div",{className:"liquidate-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(ze,{mintAddress:null===a||void 0===a?void 0:a.info.liquidityMint,style:{marginRight:"-0.5rem"}}),i.a.createElement(ze,{mintAddress:null===n||void 0===n?void 0:n.info.liquidityMint})),p,"\u2192",b),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(u))," ",b),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(t.borrowedInQuote)))),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(m))," ",p),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(t.collateralInQuote)))),i.a.createElement("div",null,O.f.format(s)),i.a.createElement("div",null,O.f.format(t.ltv/100)),i.a.createElement("div",null,t.health.toFixed(2)),i.a.createElement("div",null,i.a.createElement(Ae.a,{type:"primary"},i.a.createElement("span",null,_e.b.LIQUIDATE_ACTION)))))},on=(n(833),function(){var e=ne().obligations,t=Object(r.useMemo)((function(){return e.filter((function(e){return e.info.health<1}))}),[e]),n=Object(r.useMemo)((function(){return t.reduce((function(e,t){return e+t.info.collateralInQuote}),0)}),[t]),a=Object(r.useMemo)((function(){return t.length}),[t]),o=Object(r.useMemo)((function(){return t.length/e.length}),[t,e]),c=Object(r.useMemo)((function(){return t.reduce((function(e,t){return e.set(t.info.repayName,(e.get(t.info.collateralName)||0)+t.info.collateralInQuote),e}),new Map)}),[t]),l=Object(r.useMemo)((function(){return Object(y.a)(c.keys())}),[c]);return i.a.createElement("div",{className:"liquidate-container"},0===t.length?i.a.createElement("div",{className:"liquidate-info"},_e.b.LIQUIDATE_NO_LOANS):i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{span:24},i.a.createElement(Ge.a,null,i.a.createElement(Bt.a,null,_e.b.LIQUIDATION_INFO)))),i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:"Value at risk",value:n,precision:2,valueStyle:{color:"#3fBB00"},prefix:"$"}))),i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:"Loans at risk",value:a,precision:0}))),i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:"% loans at risk",value:100*o,precision:2,suffix:"%"}))),i.a.createElement(Ke.a,{xs:24,xl:9},i.a.createElement(Ge.a,null,i.a.createElement(Ve,{title:"At risk loan composition",name:function(e){return e},getPct:function(e){return(c.get(e)||0)/n},items:l})))),i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{span:24},i.a.createElement(Ge.a,{className:"card-fill"},i.a.createElement("div",{className:"liquidate-item liquidate-header"},i.a.createElement("div",null,_e.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,_e.b.TABLE_TITLE_LOAN_BALANCE),i.a.createElement("div",null,_e.b.TABLE_TITLE_COLLATERAL_BALANCE),i.a.createElement("div",null,_e.b.TABLE_TITLE_APY),i.a.createElement("div",null,_e.b.TABLE_TITLE_LTV),i.a.createElement("div",null,_e.b.TABLE_TITLE_HEALTH),i.a.createElement("div",null,_e.b.TABLE_TITLE_ACTION)),t.map((function(e){return i.a.createElement(rn,{key:e.account.pubkey.toBase58(),item:e})})))))))}),cn=function(e){var t=e.obligation,n=H(null===t||void 0===t?void 0:t.info.borrowReserve),a=H(null===t||void 0===t?void 0:t.info.collateralReserve),o=Object(f.h)(null===n||void 0===n?void 0:n.info.liquidityMint),c=Object(f.h)(null===a||void 0===a?void 0:a.info.liquidityMint),l=J(null===n||void 0===n?void 0:n.info.liquidityMint),u=J(null===a||void 0===a?void 0:a.info.liquidityMint),s=Object(r.useMemo)((function(){return n?Object(B.calculateBorrowAPY)(null===n||void 0===n?void 0:n.info):0}),[n]);if(!t||!n)return null;var d=Object(O.i)(Object(O.s)(null===t||void 0===t?void 0:t.info.borrowAmountWad),o),m=Object(B.collateralToLiquidity)(null===t||void 0===t?void 0:t.info.depositedCollateral,n.info),b=Object(O.i)(m,c);return i.a.createElement(Fe.a,{gutter:_e.a},i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,{className:e.className},i.a.createElement(Qe.a,{title:"Loan Balance",value:t.info.borrowedInQuote,formatter:function(e){return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(d))," ",l),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(parseFloat(e.toString()))))}}))),i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,{className:e.className},i.a.createElement(Qe.a,{title:"Collateral",value:t.info.collateralInQuote,formatter:function(e){return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(b))," ",u),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(parseFloat(e.toString()))))}}))),i.a.createElement(Ke.a,{xs:24,xl:5},i.a.createElement(Ge.a,{className:e.className},i.a.createElement(Qe.a,{title:"APY",value:O.f.format(s)}))),i.a.createElement(Ke.a,{xs:24,xl:9},i.a.createElement(Ge.a,{className:e.className},i.a.createElement(Qe.a,{title:"Health Factor",value:t.info.health.toFixed(2)}))))},ln=n(314),un=n.n(ln),sn=(n(834),function(e){var t,n=Object(d.d)(),a=Object(s.b)().wallet,o=e.repayReserve,c=e.withdrawReserve,l=e.obligation,u=Object(r.useState)("liquidate"),m=Object(E.a)(u,2),b=m[0],y=m[1],g=Object(r.useState)(!1),h=Object(E.a)(g,2),j=h[0],w=h[1],k=Object(r.useState)(!1),A=Object(E.a)(k,2),x=A[0],S=A[1],T=Object(r.useState)(""),N=Object(E.a)(T,2),I=N[0],B=N[1],L=Object(f.h)(o.info.liquidityMint),M=X(null===o||void 0===o?void 0:o.info.liquidityMint),C=M.accounts,_=M.balance,R=Object(O.s)(l.info.borrowAmountWad).toNumber(),q=Object(O.i)(R,L),P=Object(r.useCallback)((function(e){var t=Math.min(_||1/0,q);return y("liquidate"),"string"===typeof e?parseFloat(e)/t*100:e*t/100}),[q,_]),D=ce(P),W=D.value,F=D.setValue,K=D.pct,G=D.setPct,Q=D.type,z=Object(r.useCallback)((function(){c&&(null===a||void 0===a?void 0:a.publicKey)&&(w(!0),Object(v.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Q===ee.Percent&&_>=q?K*R/100:Math.ceil(R*(parseFloat(W)/q)),e.next=4,bt(n,a,C[0],t,l.account,o,c);case 4:F(""),B(""),S(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Object($e.a)({message:"Unable to liquidate loan.",type:"error",description:e.t0.message});case 12:return e.prev=12,w(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})))())}),[c,C,l,o,a,n,W,F,q,R,K,_,Q]),Y=null===(t=U(null===c||void 0===c?void 0:c.info.liquidityMint.toBase58()))||void 0===t?void 0:t.price;if(Object(r.useEffect)((function(){if(c&&"liquidate"===b){var e=l.info.collateralInQuote/Y;if(W){var t=parseFloat(W)/q*100;B((t*e/100).toString())}else B("")}}),[q,Y,c,b,l.info.collateralInQuote,W]),Object(r.useEffect)((function(){if(c&&"collateral"===b){var e=l.info.collateralInQuote/Y;if(I){var t=parseFloat(I)/e*100;F((t*q/100).toString())}else F("")}}),[q,Y,c,I,b,l.info.collateralInQuote,F]),!c)return null;return i.a.createElement(un.a,{className:e.className,bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},x?i.a.createElement(pt,{onClose:function(){return S(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{className:"repay-input-title"},_e.b.LIQUIDATE_QUESTION),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(xt,{title:"Liquidate Amount",reserve:o.info,amount:parseFloat(W)||0,onInputChange:function(e){F((null===e||void 0===e?void 0:e.toString())||""),y("liquidate")},disabled:!0,useWalletBalance:!0})),i.a.createElement(Tt.a,{marks:_e.f,value:K,onChange:G}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",marginBottom:20}},i.a.createElement(xt,{title:"Collateral Amount (estimated)",reserve:null===c||void 0===c?void 0:c.info,amount:parseFloat(I)||0,onInputChange:function(e){B((null===e||void 0===e?void 0:e.toString())||""),y("collateral")},disabled:!0,hideBalance:!0})),i.a.createElement(Pe,{type:"primary",size:"large",onClick:z,loading:j,disabled:0===C.length},_e.b.LIQUIDATE_ACTION)))}),dn=(n(859),function(){var e=ae(Object(u.h)().id),t=H(null===e||void 0===e?void 0:e.info.borrowReserve),n=H(null===e||void 0===e?void 0:e.info.collateralReserve);return e&&t?i.a.createElement("div",{className:"borrow-reserve"},i.a.createElement(cn,{className:"card-fill",obligation:e}),i.a.createElement(Fe.a,{gutter:_e.a,style:{flex:1}},i.a.createElement(Ke.a,{xs:24,xl:15},i.a.createElement(sn,{className:"card-fill",obligation:e,withdrawReserve:n,repayReserve:t})),i.a.createElement(Ke.a,{xs:24,xl:9},i.a.createElement(Mt,{className:"card-fill",reserve:t,mode:St.Deposit})))):null}),fn=(n(860),function(e){var t=J(e.reserve.liquidityMint),n=U(e.reserve.liquidityMint.toBase58()).price,a=Object(Q.j)(e.reserve),r=ue(e.address,!1,!1),o=r.totalInQuote,c=r.borrowingPower;return i.a.createElement(l.b,{to:"/margin/".concat(e.address.toBase58())},i.a.createElement("div",{className:"choose-margin-item"},i.a.createElement("span",{style:{display:"flex"}},i.a.createElement(ze,{mintAddress:e.reserve.liquidityMint}),t),i.a.createElement("div",null,"$",O.e.format(n)),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("em",null,O.e.format(c))," ",t),i.a.createElement("div",{className:"dashboard-amount-quote"},"$",O.e.format(o)))),i.a.createElement("div",null,O.f.format(a)),i.a.createElement("div",null,i.a.createElement(Ae.a,{type:"primary"},i.a.createElement("span",null,_e.b.MARGIN_TRADE_ACTION)))))}),mn=function(){var e=V().reserveAccounts;return i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Ge.a,null,i.a.createElement("div",{className:"choose-margin-item choose-margin-header"},i.a.createElement("div",null,_e.b.TABLE_TITLE_ASSET),i.a.createElement("div",null,"Serum Dex Price"),i.a.createElement("div",null,_e.b.TABLE_TITLE_BUYING_POWER),i.a.createElement("div",null,_e.b.TABLE_TITLE_APY),i.a.createElement("div",null)),e.map((function(e){return i.a.createElement(fn,{reserve:e.info,address:e.pubkey})}))))},bn=n(1181),pn=n(304),vn=n(1171),yn=function(e){var t,n=e.transaction;return n?i.a.createElement("div",{className:"dashboard-item"},i.a.createElement("div",{style:{textAlign:"left"}},B.TransactionListLookup[n.transactionType]),i.a.createElement("div",null,i.a.createElement(pn.a,{address:n.signature.signature,type:"transaction"})),i.a.createElement("div",null,i.a.createElement(ke.a,{placement:"topLeft",title:"Logs ".concat(Object(O.p)(n.signature.signature)),content:i.a.createElement("ul",null,n.confirmedTx.meta.logMessages.map((function(e){return i.a.createElement("li",{key:e},e)}))),trigger:"click"},i.a.createElement(Ae.a,{type:"primary"},"Show Logs"))),i.a.createElement("div",null,O.d.format(Object(O.o)(n.confirmedTx.meta.fee))),i.a.createElement("div",null,(null===(t=n.confirmedTx)||void 0===t?void 0:t.meta.err)?i.a.createElement(vn.a,{color:"red"},"Error"):i.a.createElement(vn.a,{color:"green"},"Success"))):null},En=function(){var e=Object(s.b)(),t=e.connected,n=e.wallet,a=Object(d.d)(),o=Object(r.useState)([]),c=Object(E.a)(o,2),l=c[0],u=c[1],b=Object(r.useState)(!0),g=Object(E.a)(b,2),h=g[0],O=g[1];return Object(r.useEffect)((function(){var e=function(){var e=Object(v.a)(p.a.mark((function e(){var r,i,o,c,l,s,d,b,v,E,g,h,j,w,k,A,x;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!(null===n||void 0===n?void 0:n.publicKey)){e.next=58;break}return O(!0),e.next=4,a.getConfirmedSignaturesForAddress2(n.publicKey);case 4:r=e.sent,i=f.d.getAllTransactions(),o=Object(y.a)(i.keys()),c=r.filter((function(e){return!o.includes(e.signature)})),(l=Object(y.a)(i.values()).filter((function(e){return null!==e}))).length>0&&u(l),s=Object(m.a)(c),e.prev=11,s.s();case 13:if((d=s.n()).done){e.next=49;break}if(b=d.value,!(l.length>=100)){e.next=17;break}return e.abrupt("break",49);case 17:return e.next=19,a.getConfirmedTransaction(b.signature);case 19:if(v=e.sent,E=null===v||void 0===v?void 0:v.transaction.instructions,g=null===E||void 0===E?void 0:E.filter((function(e){return e.programId.toBase58()===I.a.toBase58()})),h=!1,!(g&&g.length>0)){e.next=46;break}j=Object(m.a)(g),e.prev=25,j.s();case 27:if((w=j.n()).done){e.next=38;break}if(k=w.value,!((A=k.data[0])in B.TransactionListLookup)){e.next=36;break}return x={transactionType:A,signature:b,confirmedTx:v},l.push(x),f.d.addTransaction(b.signature,x),h=!0,e.abrupt("break",38);case 36:e.next=27;break;case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(25),j.e(e.t0);case 43:return e.prev=43,j.f(),e.finish(43);case 46:h||f.d.addTransaction(b.signature,null);case 47:e.next=13;break;case 49:e.next=54;break;case 51:e.prev=51,e.t1=e.catch(11),s.e(e.t1);case 54:return e.prev=54,s.f(),e.finish(54);case 57:return e.abrupt("return",l);case 58:return e.abrupt("return",[]);case 59:case"end":return e.stop()}}),e,null,[[11,51,54,57],[25,40,43,46]])})));return function(){return e.apply(this,arguments)}}();Promise.all([e()]).then((function(e){O(!1),u(e.flat())}))}),[t,a,null===n||void 0===n?void 0:n.publicKey,O]),t?i.a.createElement("div",{className:"flexColumn"},i.a.createElement(Ge.a,{style:{marginBottom:"10px"},title:i.a.createElement("div",null,"Transactions"," ",h&&i.a.createElement("span",null,"(Loading ",i.a.createElement(bn.a,null),")"))},i.a.createElement("div",{className:"dashboard-item dashboard-header"},i.a.createElement("div",null,"Type"),i.a.createElement("div",null,"Explorer Link"),i.a.createElement("div",null,"Log Details"),i.a.createElement("div",null,"Fee (SOL)"),i.a.createElement("div",null,"Status")),l.map((function(e){return i.a.createElement(yn,{key:e.signature.signature,transaction:e})})))):i.a.createElement("div",{className:"dashboard-info"},i.a.createElement("img",{src:"splash.svg",alt:"connect your wallet",className:"dashboard-splash"}),_e.b.TRANSACTIONS_INFO)};n(861);function gn(e){var t,n,a,r,i=e.collateral.type,o=e.asset.type,c=e.collateral.value||0,l=e.asset.value||0,u=C([null===i||void 0===i||null===(t=i.info)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.toBase58(),null===o||void 0===o||null===(a=o.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58()]),s=oe().userDeposits.find((function(e){var t,n;return e.reserve.info.liquidityMint.toBase58()===(null===i||void 0===i||null===(t=i.info)||void 0===t||null===(n=t.liquidityMint)||void 0===n?void 0:n.toBase58())}));return{enrichedPools:W(u?[u]:[]),collateralDeposit:s,collType:i,desiredType:o,collValue:c,desiredValue:l,leverage:e.leverage,pool:u}}var hn=n(1182);function On(e){var t=e.newPosition,n=e.setNewPosition,a=e.collateralDeposit,r=e.enrichedPools;if(n(t),a&&r.length){var i=r[0].liquidityB/r[0].liquidityA,o=(t.collateral.value||0)*t.leverage*i;n(Object(A.a)(Object(A.a)({},t),{},{asset:Object(A.a)(Object(A.a)({},t.asset),{},{value:o})}))}}function jn(e){var t=e.lendingReserve,n=e.newPosition,a=e.setNewPosition,o=Object(r.useState)(!1),c=Object(E.a)(o,2),l=c[0],u=c[1],d=gn(n),m=d.enrichedPools,b=d.collateralDeposit;!function(e){var t=e.newPosition,n=e.setNewPosition,a=gn(t),i=a.enrichedPools,o=a.collateralDeposit,c=a.collType,l=a.desiredType,u=a.collValue,s=a.desiredValue,d=a.leverage;Object(r.useEffect)((function(){if(c)if(o){if(l&&t.asset.value&&i&&0!==i.length){var e=i[0].liquidityB/i[0].liquidityA,a=t.leverage,r=o.info.amount*e,d=s/a;if(d>r)n(Object(A.a)(Object(A.a)({},t),{},{error:_e.b.NOT_ENOUGH_MARGIN_MESSAGE}));else if(d>u)n(Object(A.a)(Object(A.a)({},t),{},{error:_e.b.SET_MORE_MARGIN_MESSAGE}));else{var f=i[0].liquidityA,m=i[0].liquidityB,b=f/m,p=(f-s/e)/(m+s),v=Math.abs(100-p/b*100);n(100/a<v&&1!==a?Object(A.a)(Object(A.a)({},t),{},{error:_e.b.LEVERAGE_LIMIT_MESSAGE}):Object(A.a)(Object(A.a)({},t),{},{error:""}))}}}else n(Object(A.a)(Object(A.a)({},t),{},{error:_e.b.NO_DEPOSIT_MESSAGE}));else n(Object(A.a)(Object(A.a)({},t),{},{error:_e.b.NO_COLL_TYPE_MESSAGE}))}),[c,l,s,d,i,u,o])}({newPosition:n,setNewPosition:a});var p=Object(s.b)(),v=p.connected,y=p.connect;return i.a.createElement(Ge.a,{className:"new-position-item new-position-item-top-left",bodyStyle:{display:"flex",flex:1,justifyContent:"center",alignItems:"center",height:"100%"}},l?i.a.createElement(pt,{onClose:function(){return u(!1)}}):i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},i.a.createElement(xt,{title:"Collateral",reserve:t.info,amount:n.collateral.value,onInputChange:function(e){On({newPosition:Object(A.a)(Object(A.a)({},n),{},{collateral:Object(A.a)(Object(A.a)({},n.collateral),{},{value:e})}),setNewPosition:a,enrichedPools:m,collateralDeposit:b})},onCollateralReserve:function(e){var t=f.d.byParser(et.a).find((function(t){return t===e}))||"",r=f.d.get(t);On({newPosition:Object(A.a)(Object(A.a)({},n),{},{collateral:{value:n.collateral.value,type:r}}),setNewPosition:a,enrichedPools:m,collateralDeposit:b})},showLeverageSelector:!0,onLeverage:function(e){On({newPosition:Object(A.a)(Object(A.a)({},n),{},{leverage:e}),setNewPosition:a,enrichedPools:m,collateralDeposit:b})},leverage:n.leverage})),i.a.createElement(hn.a,null),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"}},n.asset.type&&i.a.createElement(xt,{title:"Choose trade",reserve:n.asset.type.info,amount:n.asset.value,onInputChange:function(e){!function(e){var t=e.newPosition,n=e.setNewPosition,a=e.collateralDeposit,r=e.enrichedPools;if(n(t),a&&r.length){var i=r[0].liquidityB/r[0].liquidityA,o=(t.asset.value||0)/(i*t.leverage);n(Object(A.a)(Object(A.a)({},t),{},{collateral:Object(A.a)(Object(A.a)({},t.collateral),{},{value:o})}))}}({newPosition:Object(A.a)(Object(A.a)({},n),{},{asset:Object(A.a)(Object(A.a)({},n.asset),{},{value:e})}),setNewPosition:a,enrichedPools:m,collateralDeposit:b})},disabled:!0,hideBalance:!0}),i.a.createElement(Ae.a,{className:"trade-button",type:"primary",size:"large",onClick:v?void 0:y,style:{width:"100%"},disabled:v&&!!n.error},i.a.createElement("span",null,function(e,t){return e?t.error?t.error:_e.b.TRADING_ADD_POSITION:_e.b.CONNECT_LABEL}(v,n))))))}var wn=n(1163),kn=n(1183),An=n(258),xn=n(572),Sn=n.n(xn),Tn=[{x:0,y:65},{x:1,y:80},{x:2,y:60},{x:3,y:30},{x:4,y:20},{x:5,y:35},{x:6,y:25},{x:7,y:40},{x:8,y:36},{x:9,y:34},{x:10,y:50},{x:11,y:33},{x:12,y:37},{x:13,y:45},{x:14,y:35},{x:15,y:37},{x:16,y:50},{x:17,y:43},{x:18,y:50},{x:19,y:45},{x:20,y:55},{x:21,y:50},{x:22,y:45},{x:23,y:50},{x:24,y:45},{x:25,y:40},{x:26,y:35},{x:27,y:40},{x:28,y:37},{x:29,y:45},{x:30,y:50},{x:31,y:60},{x:32,y:55},{x:33,y:50},{x:34,y:53},{x:35,y:55},{x:36,y:50},{x:37,y:45},{x:38,y:40},{x:39,y:45},{x:40,y:50},{x:41,y:55},{x:42,y:65},{x:43,y:62},{x:44,y:54},{x:45,y:65},{x:46,y:48},{x:47,y:55},{x:48,y:60},{x:49,y:63},{x:50,y:65}];function Nn(){var e=Bn();return{datasets:[{backgroundColor:"transparent",borderColor:"rgb(39, 107, 251)",borderWidth:4,radius:0,data:JSON.parse(JSON.stringify(Tn.slice(0,Math.floor(Tn.length)/2+1)))},{backgroundColor:"transparent",borderWidth:4,radius:0,data:e,borderDash:[15,3],label:"LEVERAGE"},{backgroundColor:"transparent",borderColor:"rgb(86, 169, 255)",borderWidth:2,radius:0,data:e,borderDash:[8,4],label:"HOLD"}]}}var In={},Bn=function(){return JSON.parse(JSON.stringify(Tn.slice(Math.floor(Tn.length)/2)))};function Ln(e){var t=e.item,n=e.priceChange,a=e.chart;if((null===a||void 0===a?void 0:a.data.datasets)&&!((null===a||void 0===a?void 0:a.data.datasets.length)<2)){In.afterDraw=function(e){!function(e,t,n){var a;if(!e.config||!e.config.data||!e.config.data.datasets||!e.canvas)return;var r=e.ctx;if(!r)return;r.save(),r.font="normal normal bold 15px /1.5 Muli",r.textBaseline="bottom";var i=e.config.data.datasets,o=null===e||void 0===e||null===(a=e.canvas)||void 0===a?void 0:a.parentNode;i.forEach((function(a,i){var c=a.label;r.fillStyle=a.borderColor;var l,u=e.getDatasetMeta(i),s=u.data.length-1,d=Math.floor(s/2)-Math.floor(.2*s),f=u.data[d]._model.x,m=u.data[d]._model.y;(l="HOLD"===c?t*n>0?1.2*m:.8*m:t*n>0?.8*m:1.2*m)>o.offsetHeight&&(o.style.height="".concat(1.3*l,"px")),l<0&&(l=5),c&&r.fillText(c,f,l)})),r.restore()}(e,t.leverage,n)};var r=Bn(),i=t.leverage,o=r.map((function(e,t){if(0===t)return{x:e.x,y:e.y};var a=n*i/100;return{x:e.x,y:e.y*(1+a)}}));a.data.datasets[1].data=o,a.data.datasets[1].borderColor=n>=0?"rgb(51, 223, 204)":"rgb(255,79,79)",r.forEach((function(e,t){0!==t&&(e.y+=e.y*n/100)})),a.data.datasets[2].data=r,null===a||void 0===a||a.update()}}function Mn(e){var t=e.item,n=e.priceChange,a=Object(r.useRef)(),o=Object(r.useRef)();return Object(r.useEffect)((function(){o.current&&!a.current&&(a.current=new Sn.a(o.current,{type:"line",data:Nn(),plugins:[In],options:{responsive:!0,maintainAspectRatio:!0,scaleShowLabels:!1,layout:{padding:{top:30,bottom:80}},labels:{render:"title",fontColor:["green","white","red"],precision:2},animation:{easing:"easeOutExpo",duration:500},scales:{xAxes:[{display:!1,gridLines:{display:!1},type:"linear",position:"bottom"}],yAxes:[{display:!1,gridLines:{display:!1}}]},legend:{display:!1}}}))}),[]),Object(r.useEffect)((function(){a.current&&Ln({item:t,priceChange:n,chart:a.current})}),[n,t]),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"center"}},i.a.createElement("canvas",{ref:o}),i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},i.a.createElement("span",null,"past"),i.a.createElement("span",null,"today"),i.a.createElement("span",null,"future")))}function Cn(e){var t=e.item,n=gn(t),a=n.enrichedPools,o=n.leverage,c=0===a.length?1:a[0].liquidityB/a[0].liquidityA,l=t.collateral.value||0,u=(t.collateral.value||0)*o-l,s=An.find((function(e){var n,a,r;return e.mintAddress===(null===(n=t.asset.type)||void 0===n||null===(a=n.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58())})),d=An.find((function(e){var n,a,r;return e.mintAddress===(null===(n=t.collateral.type)||void 0===n||null===(a=n.info)||void 0===a||null===(r=a.liquidityMint)||void 0===r?void 0:r.toBase58())})),f=Object(r.useState)(10),m=Object(E.a)(f,2),b=m[0],p=m[1],v=(l+u)*(b/100),y=null;if(v>0){var g=v+l+u;y=i.a.createElement(wn.a,{percent:l/g*100+u/g*100,success:{percent:u/g*100,strokeColor:"brown"},strokeColor:"blue",trailColor:"green",showInfo:!1})}else{var h=(l+=v)+u;y=l<0?i.a.createElement("p",null,"Your position has been liquidated at this price swing."):i.a.createElement(wn.a,{showInfo:!1,success:{percent:u/h*100,strokeColor:"brown"},trailColor:"blue"})}return i.a.createElement("div",{className:"new-position-item new-position-item-top-right"},i.a.createElement(Ge.a,{className:"new-position-item new-position-item-top-right"},i.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"}},i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:"Borrowed",value:u*c,precision:2,valueStyle:{color:"brown"},suffix:null===s||void 0===s?void 0:s.tokenSymbol})),i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:"My Collateral",value:l,precision:2,valueStyle:{color:"blue"},suffix:null===d||void 0===d?void 0:d.tokenSymbol})),i.a.createElement(Ge.a,null,i.a.createElement(Qe.a,{title:"Profit/Loss",value:v*c,precision:2,valueStyle:{color:v>0?"green":"red"},suffix:null===s||void 0===s?void 0:s.tokenSymbol,prefix:v>0?i.a.createElement(kn.a,null):i.a.createElement(hn.a,null)}))),i.a.createElement("br",null),y),i.a.createElement(Ge.a,{className:"new-position-item new-position-item-bottom-right"},i.a.createElement(Mn,{item:t,priceChange:b}),i.a.createElement(Tt.a,{tooltipVisible:!0,defaultValue:10,tipFormatter:function(e){return i.a.createElement("span",null,e,"%")},max:100,min:-100,tooltipPlacement:"top",onChange:function(e){p(e)},style:{marginBottom:"20px"}})))}var _n=function(e){var t=e.pool,n=Object(r.useMemo)((function(){return[e.pool].filter((function(e){return e}))}),[e.pool]),a=W(n)[0],o=Object(z.a)().userAccounts,c=Object(f.h)(t.pubkeys.mint),l=o.filter((function(e){return t.pubkeys.mint.equals(e.info.mint)})).reduce((function(e,t){return t.info.amount.toNumber()+e}),0)/((null===c||void 0===c?void 0:c.supply.toNumber())||0);return a?i.a.createElement(Ge.a,{className:"ccy-input",style:{borderRadius:20,width:"100%"},bodyStyle:{padding:"7px"},size:"small",title:"Prices and pool share"},i.a.createElement(Fe.a,{style:{width:"100%"}},i.a.createElement(Ke.a,{span:8},O.g.format(parseFloat(a.liquidityA)/parseFloat(a.liquidityB))),i.a.createElement(Ke.a,{span:8},O.g.format(parseFloat(a.liquidityB)/parseFloat(a.liquidityA))),i.a.createElement(Ke.a,{span:8},100*l<.001&&l>0?"<":"","\xa0",O.g.format(100*l),"%")),i.a.createElement(Fe.a,{style:{width:"100%"}},i.a.createElement(Ke.a,{span:8},a.names[0]," per ",a.names[1]),i.a.createElement(Ke.a,{span:8},a.names[1]," per ",a.names[0]),i.a.createElement(Ke.a,{span:8},"Share of pool"))):null},Rn=n(322),qn=n.n(Rn),Pn=function(e){var t=e.pool,n=Object(r.useMemo)((function(){return t?[t]:[]}),[t]),a=W(n),o=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=o.current;return function(){var t=e&&qn.a.getInstanceByDom(e);t&&t.dispose()}}),[]),Object(r.useEffect)((function(){if(o.current&&0!==a.length){var e=qn.a.getInstanceByDom(o.current);e||(e=qn.a.init(o.current));var t=[{name:a[0].names[0],value:a[0].liquidityAinUsd,tokens:a[0].liquidityA},{name:a[0].names[1],value:a[0].liquidityBinUsd,tokens:a[0].liquidityB}];e.setOption({tooltip:{trigger:"item",formatter:function(e){var t=O.h.format(e.value),n=O.e.format(e.data.tokens);return"".concat(e.name,": \n").concat(t,"\n(").concat(n,")")}},series:[{name:"Liquidity",type:"pie",top:0,bottom:0,left:0,right:0,animation:!1,label:{fontSize:14,show:!0,formatter:function(e){var t=O.h.format(e.value),n=O.e.format(e.data.tokens);return"{c|".concat(e.name,"}\n{r|").concat(n,"}\n{r|").concat(t,"}")},rich:{c:{color:"black",lineHeight:22,align:"center"},r:{color:"black",align:"right"}},color:"rgba(255, 255, 255, 0.5)"},itemStyle:{normal:{borderColor:"#000"}},data:t}]})}}),[a]),0===a.length?null:i.a.createElement("div",{ref:o,style:{height:150,width:"100%"}})};function Dn(e){var t=gn(e.newPosition).pool;return i.a.createElement(un.a,{className:"new-position-item new-position-item-bottom-left"},!t&&i.a.createElement("span",null,"Choose a CCY to see exchange rate information."),t&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_n,{pool:t}),i.a.createElement(Pn,{pool:t})))}var Wn=function(){var e=H(Object(u.h)().id),t=Object(r.useState)({id:null,leverage:5,collateral:{},asset:{}}),n=Object(E.a)(t,2),a=n[0],o=n[1];return e?(a.asset.type||o(Object(A.a)(Object(A.a)({},a),{},{asset:{value:a.asset.value,type:e}})),i.a.createElement("div",{className:"new-position"},i.a.createElement("div",{className:"new-position-container"},i.a.createElement("div",{className:"new-position-item-left"},i.a.createElement(jn,{lendingReserve:e,newPosition:a,setNewPosition:o}),i.a.createElement(Dn,{newPosition:a})),i.a.createElement(Cn,{item:a})))):null};function Un(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{basename:"/"},i.a.createElement(d.a,null,i.a.createElement(s.a,null,i.a.createElement(f.a,null,i.a.createElement(P,null,i.a.createElement(de,null,i.a.createElement(Ue,null,i.a.createElement(u.c,null,i.a.createElement(u.a,{exact:!0,path:"/",component:function(){return i.a.createElement(He,null)}}),i.a.createElement(u.a,{exact:!0,path:"/dashboard",children:i.a.createElement(Wt,null)}),i.a.createElement(u.a,{exact:!0,path:"/transactions",children:i.a.createElement(En,null)}),i.a.createElement(u.a,{path:"/reserve/:id",children:i.a.createElement(Zt,null)}),i.a.createElement(u.a,{exact:!0,path:"/deposit",component:function(){return i.a.createElement(Ft,null)}}),i.a.createElement(u.a,{path:"/deposit/:id",children:i.a.createElement(Qt,null)}),i.a.createElement(u.a,{path:"/withdraw/:id",children:i.a.createElement(en,null)}),i.a.createElement(u.a,{exact:!0,path:"/borrow",children:i.a.createElement(Xe,null)}),i.a.createElement(u.a,{path:"/borrow/:id",children:i.a.createElement(Ct,null)}),i.a.createElement(u.a,{path:"/repay/loan/:obligation",children:i.a.createElement(an,null)}),i.a.createElement(u.a,{path:"/repay/:reserve",children:i.a.createElement(an,null)}),i.a.createElement(u.a,{exact:!0,path:"/liquidate",children:i.a.createElement(on,null)}),i.a.createElement(u.a,{path:"/liquidate/:id",children:i.a.createElement(dn,null)}),i.a.createElement(u.a,{exact:!0,path:"/margin",children:i.a.createElement(mn,null)}),i.a.createElement(u.a,{path:"/margin/:id",children:i.a.createElement(Wn,null)}),i.a.createElement(u.a,{exact:!0,path:"/faucet",children:i.a.createElement(tn,null)}))))))))))}var Fn=function(){return i.a.createElement(Un,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Fn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},117:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(14);function r(){return{userAccounts:Object(a.g)().userAccounts}}},12:function(e,t,n){"use strict";n.d(t,"g",(function(){return u})),n.d(t,"r",(function(){return s})),n.d(t,"p",(function(){return d})),n.d(t,"m",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return v})),n.d(t,"q",(function(){return y})),n.d(t,"s",(function(){return E})),n.d(t,"i",(function(){return g})),n.d(t,"h",(function(){return h})),n.d(t,"n",(function(){return j})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return k})),n.d(t,"f",(function(){return A})),n.d(t,"c",(function(){return x})),n.d(t,"j",(function(){return S})),n.d(t,"o",(function(){return T}));var a=n(107),r=n(20),i=n(0),o=n(45),c=n.n(o),l=n(13),u=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:8});function s(e,t){var n=Object(i.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),a=Object(r.a)(n,2),o=a[0],c=a[1],l=Object(i.useCallback)((function(t){o!==t&&(c(t),null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}),[o,e]);return[o,l]}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))}function f(e,t){var n,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(!r)return"N/A";var i=null===(n=e.get(r))||void 0===n?void 0:n.tokenSymbol;return i||(a?"".concat(r.substring(0,5),"..."):r)}function m(e,t){var n,r=null,i=Object(a.a)(e.values());try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.tokenSymbol===t){r=o;break}}}catch(c){i.e(c)}finally{i.f()}return r}function b(e,t){var n,a="string"===typeof t?t:null===t||void 0===t?void 0:t.toBase58();if(a)return null===(n=e.get(a))||void 0===n?void 0:n.icon}var p=new Set(["USDC","wUSDC","USDT"]);function v(e,t){return Array.apply(0,new Array(Math.ceil(e.length/t))).map((function(n,a){return e.slice(a*t,(a+1)*t)}))}function y(e,t){var n;if(!e)return 0;var a="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return Math.floor(a*r)}function E(e){return(null===e||void 0===e?void 0:e.div(l.d))||l.e}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var a=Math.floor("number"===typeof e?e:c.a.isBN(e)?e.toNumber():e.info.amount.toNumber()),r=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0);return a/r*n}var h=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),O=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),j=function(e){return e<.001&&e>0},w={format:function(e,t){return e?t&&j(e)?.001:O.format(e):"--"}},k=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:9}),A=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function x(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return 0;var r="number"===typeof e?e:null===(n=e.info.amount)||void 0===n?void 0:n.toNumber(),i=Math.pow(10,(null===t||void 0===t?void 0:t.decimals)||0),o=r/i*a;return o}function S(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t.pubkeys.holdingMints.map((function(e){return e.toBase58()})).sort();return a.map((function(t){return f(e,t,n)})).join("/")}function T(e){if("number"===typeof e)return Math.abs(e)/l.c;var t=1;e.isNeg()&&(t=-1);var n=e.abs().toString(10).padStart(10,"0"),a=n.length-9,r=n.slice(0,a)+"."+n.slice(a);return t*parseFloat(r)}},13:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"a",(function(){return f}));var a={CONNECT_LABEL:"Connect",BORROWING_POWER_USED:"Borrowing Power Used",BORROWING_POWER_VALUE:"Borrowing Power",BORROWED_VALUE:"You borrowed",GIVE_SOL:"Give me SOL",LIQUIDATION_INFO:"This view displays all loans that can be liquidated. A liquidation is a process where borrower collateral does not cover value of the loan. It is represented by health factor falling below 1.0. When a loan is liquidated, an liquidator can purchase collateral at a discount by repaing the portio of the loan. ",FAUCET_INFO:"This faucet will help you fund your accounts outside of Solana main network.",ACCOUNT_FUNDED:"Account funded.",REPAY_QUESTION:"How much would you like to repay?",REPAY_ACTION:"Repay",RESERVE_STATUS_TITLE:"Reserve Status & Configuration",AUDIT_WARNING:"Oyster is an unaudited software project used for internal purposes at the Solana Foundation. This app is not for public use.",FOOTER:'This page was produced by the Solana Foundation ("SF") for internal educational and inspiration purposes only. SF does not encourage, induce or sanction the deployment, integration or use of Oyster or any similar application (including its code) in violation of applicable laws or regulations and hereby prohibits any such deployment, integration or use. Anyone using this code or a derivation thereof must comply with applicable laws and regulations when releasing related software.',MENU_HOME:"Home",MENU_DASHBOARD:"Dashboard",DASHBOARD_INFO:"Connect to a wallet to view your deposits/loans.",TRANSACTIONS_INFO:"Connect to a wallet to view your transactions.",NO_LOANS_NO_DEPOSITS:"No loans or deposits.",MENU_DEPOSIT:"Deposit",DEPOSITS:"Deposits",BORROWS:"Borrows",LOAN_TO_VALUE:"Loan to value",MENU_BORROW:"Borrow",MENU_LIQUIDATE:"Liquidate",MENU_FAUCET:"Faucet",MENU_TRANSACTION:"Transactions",MARGIN_TRADING:"Margin Trading",APP_TITLE:"Financial Aid Coin Lending",CONNECT_BUTTON:"Connect",WALLET_TOOLTIP:"Wallet public key",WALLET_BALANCE:"Wallet balance",OYSTER_BALANCE:"Oyster balance",SETTINGS_TOOLTIP:"Settings",SELECT_COLLATERAL:"Select collateral",COLLATERAL:"Collateral",BORROW_QUESTION:"How much would you like to borrow?",BORROW_ACTION:"Borrow",NO_COLLATERAL:"No collateral",NO_DEPOSITS:"No deposits",NO_LOANS:"No loans",NOTHING_BORROWED:"Nothing borrowed yet",NOTHING_BORROWED_MESSAGE:"There will be a list of all the assets you have borrowed. For now, it's empty since you have not borrowed.",BORROW_NOW:"Borrow now",LIQUIDATE_QUESTION:"How much would you like to liquidate?",LIQUIDATE_ACTION:"Liquidate",LIQUIDATE_NO_LOANS:"There are no loans to liquidate.",TABLE_TITLE_ASSET:"Asset",TABLE_TITLE_YOUR_LOAN_BALANCE:"Loan balance",TABLE_TITLE_LOAN_BALANCE:"Loan balance",TABLE_TITLE_COLLATERAL_BALANCE:"Collateral",TABLE_TITLE_DEPOSIT_BALANCE:"Your deposits",TABLE_TITLE_APY:"APY",TABLE_TITLE_LTV:"LTV",TABLE_TITLE_HEALTH:"Health Factor",TABLE_TITLE_BORROW_APY:"Borrow APY",TABLE_TITLE_DEPOSIT_APY:"Deposit APY",TABLE_TITLE_TOTAL_BORROWED:"Total Borrowed",TABLE_TITLE_MARKET_SIZE:"Market Size",TABLE_TITLE_ACTION:"Action",TABLE_TITLE_DEPOSITS:"Deposits",TABLE_TITLE_WITHDRAWS:"Withdraws",TABLE_TITLE_BORROWS:"Borrows",TABLE_TITLE_REPAY_OBLIGATIONS:"Repay Obligations",TABLE_TITLE_LIQUIDATE_OBLIGATIONS:"Liquidate Obligations",MAX_LTV:"Maximum LTV",LIQUIDATION_THRESHOLD:"Liquidation threshold",LIQUIDATION_PENALTY:"Liquidation penalty",TABLE_TITLE_MAX_BORROW:"Available for you",DASHBOARD_TITLE_LOANS:"Loans",DASHBOARD_TITLE_DEPOSITS:"Deposits",DEPOSIT_QUESTION:"How much would you like to deposit?",WITHDRAW_ACTION:"Withdraw",WITHDRAW_QUESTION:"How much would you like to withdraw?",DASHBOARD_ACTION:"Go to dashboard",GO_BACK_ACTION:"Go back",DEPOSIT_ACTION:"Deposit",TOTAL_TITLE:"Total",TRADING_TABLE_TITLE_MY_COLLATERAL:"Chosen Collateral",TRADING_TABLE_TITLE_DESIRED_ASSET:"Desired Asset",TRADING_TABLE_TITLE_MULTIPLIER:"Leverage",TRADING_TABLE_TITLE_ASSET_PRICE:"Asset Price",TRADING_TABLE_TITLE_LIQUIDATION_PRICE:"Liquidation Price",TRADING_TABLE_TITLE_APY:"APY",TRADING_TABLE_TITLE_ACTIONS:"Action",TRADING_ADD_POSITION:"Add Position",MARGIN_TRADE_ACTION:"Margin Trade",MARGIN_TRADE_CHOOSE_COLLATERAL_AND_LEVERAGE:"Please choose your collateral and leverage.",MARGIN_TRADE_QUESTION:"Please choose how much of this asset you wish to purchase.",TABLE_TITLE_BUYING_POWER:"Total Buying Power",NOT_ENOUGH_MARGIN_MESSAGE:"Not enough buying power in oyster to make this trade at this leverage.",SET_MORE_MARGIN_MESSAGE:"You need more margin to match this leverage amount to make this trade.",LEVERAGE_LIMIT_MESSAGE:"You will need more margin to make this trade.",NO_DEPOSIT_MESSAGE:"You need to deposit coin of this type into oyster before trading with it on margin.",NO_ENOUGH_COLLATERAL_MESSAGE:"The Collateral is greater than your Oyster Balance. The difference will be deposited first.",NO_COLL_TYPE_MESSAGE:"Choose Collateral CCY",SAFER:"Safer",RISKIER:"Riskier"},r=n(45),i=n.n(r),o=new i.a(10),c=(o.pow(new i.a(18)),o.pow(new i.a(18))),l=(o.pow(new i.a(27)),new i.a(0)),u=1e9,s={0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"},d={0:{style:{color:"rgb(63, 187, 0)"},label:a.SAFER},100:{style:{color:"red"},label:a.RISKIER}},f=[16,{xs:8,sm:16,md:16,lg:16}]},14:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return T})),n.d(t,"d",(function(){return I})),n.d(t,"g",(function(){return B})),n.d(t,"a",(function(){return _})),n.d(t,"i",(function(){return R})),n.d(t,"e",(function(){return q})),n.d(t,"h",(function(){return D})),n.d(t,"f",(function(){return W}));var a=n(319),r=n(20),i=n(107),o=n(29),c=n(11),l=n.n(c),u=n(19),s=n(0),d=n.n(s),f=n(27),m=n(62),b=n(21),p=n(53),v=n(12),y=n(308),E=n(117),g=n(24),h=d.a.createContext(null),O=new Map,j=new Map,w=new Map,k=new Map,A=new Map,x=function(){var t=Object(u.a)(l.a.mark((function t(n,a){var r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getAccountInfo(a);case 2:if(null!==(r=t.sent)){t.next=5;break}throw new Error("Failed to find mint account");case 5:return i=e.from(r.data),t.abrupt("return",F(i));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),S=function(t,n){var a=e.from(n.data),r=F(a);return{pubkey:t,account:Object(o.a)({},n),info:r}},T=function(t,n){var a=e.from(n.data),r=U(a);return{pubkey:t,account:Object(o.a)({},n),info:r}},N=new Map,I={emitter:new y.a,query:function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){var r,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="string"===typeof n?new b.d(n):n,i=r.toBase58(),!(o=j.get(i))){e.next=5;break}return e.abrupt("return",o);case 5:if(!(c=O.get(i))){e.next=8;break}return e.abrupt("return",c);case 8:return c=t.getAccountInfo(r).then((function(e){if(!e)throw new Error("Account not found");return I.add(r,e,a)})),O.set(i,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),add:function(e,t,n){if(0!==t.data.length){var a="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58(),r=n||N.get(a);if(!r)throw new Error("Deserializer needs to be registered or passed as a parameter");I.registerParser(e,r),O.delete(a);var i=r(new b.d(a),t);if(i){var o=!j.has(a);return j.set(a,i),I.emitter.raiseCacheUpdated(a,o,r),i}}},get:function(e){var t;return t="string"!==typeof e?e.toBase58():e,j.get(t)},delete:function(e){var t;return t="string"!==typeof e?e.toBase58():e,!!j.get(t)&&(j.delete(t),I.emitter.raiseCacheDeleted(t),!0)},byParser:function(e){var t,n=[],a=Object(i.a)(N.keys());try{for(a.s();!(t=a.n()).done;){var r=t.value;N.get(r)===e&&n.push(r)}}catch(o){a.e(o)}finally{a.f()}return n},registerParser:function(e,t){if(e){var n="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();N.set(n,t)}return e},queryMint:function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="string"===typeof n?new b.d(n):n,r=a.toBase58(),!(i=k.get(r))){e.next=5;break}return e.abrupt("return",i);case 5:if(!(o=w.get(r))){e.next=8;break}return e.abrupt("return",o);case 8:return o=x(t,a).then((function(e){return w.delete(r),k.set(r,e),e})),w.set(r,o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMint:function(e){var t;return t="string"!==typeof e?e.toBase58():e,k.get(t)},addMint:function(e,t){var n=F(t.data),a=e.toBase58();return k.set(a,n),n},addTransaction:function(e,t){return A.set(e,t),t},addBulkTransactions:function(e){var t,n=Object(i.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;A.set(a.signature.signature,a)}}catch(r){n.e(r)}finally{n.f()}return e},getTransaction:function(e){return A.get(e)},getAllTransactions:function(){return A},clear:function(){j.clear(),k.clear(),A.clear(),I.emitter.raiseCacheCleared()}},B=function(){return Object(s.useContext)(h)};var L=function(){var e=Object(f.d)(),t=Object(m.b)().wallet,n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],c=Object(s.useCallback)((function(n){if(e&&(null===t||void 0===t?void 0:t.publicKey)){var a=function(e,t){if(t)return{pubkey:e,account:t,info:{mint:g.d,owner:e,amount:new p.e(t.lamports),delegate:null,delegatedAmount:new p.e(0),isInitialized:!0,isFrozen:!1,isNative:!0,rentExemptReserve:null,closeAuthority:null}}}(t.publicKey,n);if(void 0!==a){var r=t.publicKey.toBase58();I.registerParser(r,T),j.set(r,a),I.emitter.raiseCacheUpdated(r,!1,T)}}}),[t,null===t||void 0===t?void 0:t.publicKey,e]);return Object(s.useEffect)((function(){e&&(null===t||void 0===t?void 0:t.publicKey)&&(e.getAccountInfo(t.publicKey).then((function(e){e&&(c(e),o(e))})),e.onAccountChange(t.publicKey,(function(e){e&&(c(e),o(e))})))}),[o,t,null===t||void 0===t?void 0:t.publicKey,e,c]),{nativeAccount:i}},M=new Set,C=function(){var e=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return M.add(n.toBase58()),e.next=5,t.getTokenAccountsByOwner(n,{programId:Object(g.e)().token});case 5:e.sent.value.forEach((function(e){I.add(e.pubkey.toBase58(),e.account,T)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function _(e){var t=e.children,n=void 0===t?null:t,a=Object(f.d)(),i=Object(m.b)(),o=i.wallet,c=i.connected,l=Object(s.useState)([]),u=Object(r.a)(l,2),v=u[0],y=u[1],E=Object(s.useState)([]),O=Object(r.a)(E,2),j=O[0],w=O[1],k=L().nativeAccount,A=Object(s.useCallback)((function(){if(!(null===o||void 0===o?void 0:o.publicKey))return[];var e=o.publicKey.toBase58();return I.byParser(T).map((function(e){return I.get(e)})).filter((function(t){return t&&t.info.owner.toBase58()===e})).map((function(e){return e}))}),[o,null===o||void 0===o?void 0:o.publicKey]);Object(s.useEffect)((function(){var e=A().filter((function(e){return void 0!==e}));w(e)}),[k,o,v,A]),Object(s.useEffect)((function(){var e=[];return I.emitter.onCache((function(e){if(e.isNew){var t=e.id,n=e.parser;a.onAccountChange(new b.d(t),(function(e){I.add(t,e,n)}))}})),function(){e.forEach((function(e){return a.removeAccountChangeListener(e)}))}}),[a]);var x=null===o||void 0===o?void 0:o.publicKey;return Object(s.useEffect)((function(){if(a&&x){C(a,g.b),C(a,x).then((function(){y(A())}));var e=a.onProgramAccountChange(Object(g.e)().token,(function(e){var t=e.accountId;if(e.accountInfo.data.length===p.a.span){var n=U(e.accountInfo.data);M.has(n.owner.toBase58())&&(I.add(t,e.accountInfo,T),y(A()))}}),"singleGossip");return function(){a.removeProgramAccountChangeListener(e)}}y([])}),[a,c,x,A]),d.a.createElement(h.Provider,{value:{userAccounts:j,nativeAccount:k}},n)}function R(){return{account:Object(s.useContext)(h).nativeAccount}}var q=function(){var t=Object(u.a)(l.a.mark((function t(n,r,i){var c,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(Object(v.b)(r,99).map((function(e){return P(n,e,i)})));case 2:return c=t.sent,u=c.map((function(t){return t.array.map((function(t){if(t){var n=t.data,r=Object(a.a)(t,["data"]);return Object(o.a)(Object(o.a)({},r),{},{data:e.from(n[0],"base64")})}})).filter((function(e){return e}))})).flat(),t.abrupt("return",{keys:r,array:u});case 5:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a){var r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._buildArgs([n],a,"base64"),e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(!(i=e.sent).error){e.next=6;break}throw new Error("failed to get info about account "+i.error.message);case 6:if(!i.result.value){e.next=9;break}return o=i.result.value,e.abrupt("return",{keys:n,array:o});case 9:throw new Error;case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function D(e){var t=Object(f.d)(),n=Object(s.useState)(),a=Object(r.a)(n,2),i=a[0],o=a[1],c="string"===typeof e?e:null===e||void 0===e?void 0:e.toBase58();return Object(s.useEffect)((function(){if(c){I.query(t,c,S).then((function(e){return o(e.info)})).catch((function(e){return console.log(e)}));var e=I.emitter.onCache((function(e){e.id===c&&I.query(t,c,S).then((function(e){return o(e.info)}))}));return function(){e()}}}),[t,c]),i}var W=function(e){var t=Object(E.a)().userAccounts,n=t.findIndex((function(t){return t.info.mint.toBase58()===e}));if(-1!==n)return t[n]};var U=function(e){var t=p.a.decode(e);return t.mint=new b.d(t.mint),t.owner=new b.d(t.owner),t.amount=p.e.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new p.e(0)):(t.delegate=new b.d(t.delegate),t.delegatedAmount=p.e.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=p.e.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new b.d(t.closeAuthority),t},F=function(e){if(e.length!==p.b.span)throw new Error("Not a valid Mint");var t=p.b.decode(e);return 0===t.mintAuthorityOption?t.mintAuthority=null:t.mintAuthority=new b.d(t.mintAuthority),t.supply=p.e.fromBuffer(t.supply),t.isInitialized=0!==t.isInitialized,0===t.freezeAuthorityOption?t.freezeAuthority=null:t.freezeAuthority=new b.d(t.freezeAuthority),t}}).call(this,n(57).Buffer)},24:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return b}));var a,r,i,o=n(21),c=n(43),l=new o.d("So11111111111111111111111111111111111111112"),u=new o.d("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),s=new o.d("TokenLending1111111111111111111111111111111"),d=new o.d("".concat("2SR2z4rezuhK2snpqR4NaVttRytTdNx9dhYAWjr1z6CM"));console.debug("Lend host fee address: ".concat(null===d||void 0===d?void 0:d.toBase58()));var f=[{name:"mainnet-beta",swap:function(){return{current:{pubkey:new o.d("9qvG1zUp8xF1Bi4m6UdRNby1BAAuaDrUxSpv4CmRRMjL"),layout:c.TokenSwapLayoutV1},legacy:[]}}},{name:"testnet",swap:function(){return{current:{pubkey:new o.d("2n2dsFSgmPcZ8jkmBZLGUM2nzuFqcBGQ3JEEj6RJJcEg"),layout:c.TokenSwapLayoutV1},legacy:[]}}},{name:"devnet",swap:function(){return{current:{pubkey:new o.d("6Cust2JhvweKLh4CVo1dt21s2PJ86uNGkziudpkNPaCj"),layout:c.TokenSwapLayout},legacy:[new o.d("BSfTAcBdqmvX5iE2PW88WFNNp2DHhLUaBKk5WrnxVkcJ")]}}},{name:"localnet",swap:function(){return{current:{pubkey:new o.d("369YmCWHGxznT7GGBhcLZDRcRoGWmGKFWdmtiPy78yj7"),layout:c.TokenSwapLayoutV1},legacy:[]}}}],m=function(e){"mainnet-beta"===e?s=new o.d("LendZqTs7gn5CTSJU1jWKhKuVpjJGom45nnwPb2AMTi"):"Lending"===e&&(s=new o.d("TokenLending1111111111111111111111111111111"));var t=f.find((function(t){return t.name===e}));if(t){var n=t.swap();a=n.current.pubkey,i=n.current.layout,r=n.legacy}},b=function(){return{token:u,swap:a,swapLayout:i,swap_legacy:r,lending:s}}},258:function(e){e.exports=JSON.parse('[{"tokenSymbol":"SOL","mintAddress":"So11111111111111111111111111111111111111112","tokenName":"Solana","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/solana/info/logo.png"},{"tokenSymbol":"USDC","mintAddress":"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v","tokenName":"USDC","icon":"https://raw.githubusercontent.com/trustwallet/assets/f3ffd0b9ae2165336279ce2f8db1981a55ce30f8/blockchains/ethereum/assets/0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48/logo.png"},{"tokenSymbol":"SRM","mintAddress":"SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt","tokenName":"SRM","icon":"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x476c5E26a75bd202a9683ffD34359C0CC15be0fF/logo.png"}]')},27:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return O})),n.d(t,"e",(function(){return j})),n.d(t,"c",(function(){return k}));var a=n(11),r=n.n(a),i=n(19),o=n(28),c=n(20),l=n(12),u=n(21),s=n(0),d=n.n(s),f=n(54),m=n(304),b=n(258),p=n(24),v=n(14),y=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com/"},{name:"Oyster Dev",endpoint:"http://oyster-dev.solana.com/"},{name:"Lending",endpoint:"https://tln.solana.com/"},{name:"testnet",endpoint:Object(u.j)("testnet")},{name:"devnet",endpoint:Object(u.j)("devnet")},{name:"localnet",endpoint:"http://127.0.0.1:8899"}],E=y[0].endpoint,g=d.a.createContext({endpoint:E,setEndpoint:function(){},slippage:.25,setSlippage:function(e){},connection:new u.b(E,"recent"),sendConnection:new u.b(E,"recent"),env:y[0].name,tokens:[],tokenMap:new Map});function h(e){var t,n=e.children,a=void 0===n?void 0:n,r=Object(l.r)("connectionEndpts",y[0].endpoint),i=Object(c.a)(r,2),f=i[0],m=i[1],E=Object(l.r)("slippage",.25.toString()),h=Object(c.a)(E,2),O=h[0],j=h[1],w=Object(s.useMemo)((function(){return new u.b(f,"recent")}),[f]),k=Object(s.useMemo)((function(){return new u.b(f,"recent")}),[f]),A=(null===(t=y.find((function(e){return e.endpoint===f})))||void 0===t?void 0:t.name)||y[0].name,x=Object(s.useState)([]),S=Object(c.a)(x,2),T=S[0],N=S[1],I=Object(s.useState)(new Map),B=Object(c.a)(I,2),L=B[0],M=B[1];return Object(s.useEffect)((function(){v.d.clear(),window.fetch("https://raw.githubusercontent.com/solana-labs/token-list/main/src/tokens/".concat(A,".json")).then((function(e){return e.json()})).catch((function(e){return[]})).then((function(e){var t=[].concat(Object(o.a)(b),Object(o.a)(e)).reduce((function(e,t){return e.set(t.mintAddress,t),e}),new Map);M(t),N(e)}))}),[A]),Object(p.f)(A),Object(s.useEffect)((function(){var e=w.onAccountChange((new u.a).publicKey,(function(){}));return function(){w.removeAccountChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=w.onSlotChange((function(){return null}));return function(){w.removeSlotChangeListener(e)}}),[w]),Object(s.useEffect)((function(){var e=k.onAccountChange((new u.a).publicKey,(function(){}));return function(){k.removeAccountChangeListener(e)}}),[k]),Object(s.useEffect)((function(){var e=k.onSlotChange((function(){return null}));return function(){k.removeSlotChangeListener(e)}}),[k]),d.a.createElement(g.Provider,{value:{endpoint:f,setEndpoint:m,slippage:parseFloat(O),setSlippage:function(e){return j(e.toString())},connection:w,sendConnection:k,tokens:T,tokenMap:L,env:A}},a)}function O(){return Object(s.useContext)(g).connection}function j(){var e=Object(s.useContext)(g);return{endpoint:e.endpoint,setEndpoint:e.setEndpoint,env:e.env,tokens:e.tokens,tokenMap:e.tokenMap}}var w=function(){var e=Object(i.a)(r.a.mark((function e(t,n){var a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.confirmTransaction(n,"max");case 2:return e.next=4,t.getParsedConfirmedTransaction(n);case 4:return a=e.sent,i=[],(null===a||void 0===a?void 0:a.meta)&&a.meta.logMessages&&a.meta.logMessages.forEach((function(e){for(var t,n=/Error: (.*)/gm;null!==(t=n.exec(e));)t.index===n.lastIndex&&n.lastIndex++,t.length>1&&i.push(t[1])})),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(r.a.mark((function e(t,n,a,i){var c,l,s,b,p,v,y,E,g,h=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=!(h.length>4&&void 0!==h[4])||h[4],null===n||void 0===n?void 0:n.publicKey){e.next=3;break}throw new Error("Wallet is not connected");case 3:return s=new u.h,a.forEach((function(e){return s.add(e)})),e.next=7,t.getRecentBlockhash("max");case 7:return s.recentBlockhash=e.sent.blockhash,(c=s).setSigners.apply(c,[n.publicKey].concat(Object(o.a)(i.map((function(e){return e.publicKey}))))),i.length>0&&(b=s).partialSign.apply(b,Object(o.a)(i)),e.next=12,n.signTransaction(s);case 12:return s=e.sent,p=s.serialize(),v={skipPreflight:!0,commitment:"singleGossip"},e.next=17,t.sendRawTransaction(p,v);case 17:if(y=e.sent,!l){e.next=28;break}return e.next=21,t.confirmTransaction(y,v&&v.commitment);case 21:if(!(null===(E=e.sent.value)||void 0===E?void 0:E.err)){e.next=28;break}return e.next=25,w(t,y);case 25:throw g=e.sent,Object(f.a)({message:"Transaction failed...",description:d.a.createElement(d.a.Fragment,null,g.map((function(e){return d.a.createElement("div",null,e)})),d.a.createElement(m.a,{address:y,type:"transaction"})),type:"error"}),new Error("Raw transaction ".concat(y," failed (").concat(JSON.stringify(E),")"));case 28:return e.abrupt("return",y);case 29:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},298:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m}));var a,r=n(21),i=n(45),o=n.n(i),c=n(1),l=n(24),u=n(31),s=n(96),d=n(98);!function(e){e[e.LiquidityBorrowAmount=0]="LiquidityBorrowAmount",e[e.CollateralDepositAmount=1]="CollateralDepositAmount"}(a||(a={}));var f=function(t,n,a,i,d,f,m,b,p,v,y,E,g,h,O,j,w,k,A){var x=c.struct([c.u8("instruction"),u.c("amount"),c.u8("amountType")]),S=e.alloc(x.span);x.encode({instruction:s.a.BorrowLiquidity,amount:new o.a(t),amountType:n},S);var T=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:E,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!0,isWritable:!1},{pubkey:j,isSigner:!1,isWritable:!1},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:k,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:l.c,isSigner:!1,isWritable:!1}];return A&&T.push({pubkey:A,isSigner:!1,isWritable:!0}),new r.i({keys:T,programId:l.a,data:S})},m=function(e){var t,n=Object(d.c)(e),a=e.config.optimalUtilizationRate/100;if(1===a||n<a){var r=n/a,i=e.config.optimalBorrowRate/100,o=e.config.minBorrowRate/100;t=r*(i-o)+o}else{var c=(n-a)/(1-a),l=e.config.optimalBorrowRate/100;t=c*(e.config.maxBorrowRate/100-l)+l}return t}}).call(this,n(57).Buffer)},304:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n.n(a),i=n(1158),o=n(12),c=function(e){var t,n,a=e.type,c=e.code,l="string"===typeof e.address?e.address:null===(t=e.address)||void 0===t?void 0:t.toBase58();if(!l)return null;var u=null!==(n=e.length)&&void 0!==n?n:9;return r.a.createElement("a",{href:"https://explorer.solana.com/".concat(a,"/").concat(l),target:"_blank",title:l,style:e.style},c?r.a.createElement(i.a.Text,{style:e.style,code:!0},Object(o.p)(l,u)):Object(o.p)(l,u))}},308:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(83),r=n(74),i=n(138),o=function e(t,n,a){Object(r.a)(this,e),this.id=void 0,this.parser=void 0,this.isNew=void 0,this.id=t,this.parser=a,this.isNew=n};o.type="CacheUpdate";var c=function e(t){Object(r.a)(this,e),this.id=void 0,this.id=t};c.type="CacheUpdate";var l=function e(t){Object(r.a)(this,e),this.ids=void 0,this.ids=t};l.type="MarketUpdate";var u=function e(){Object(r.a)(this,e)};u.type="CacheDelete";var s=function(){function e(){Object(r.a)(this,e),this.emitter=new i.EventEmitter}return Object(a.a)(e,[{key:"onMarket",value:function(e){var t=this;return this.emitter.on(l.type,e),function(){return t.emitter.removeListener(l.type,e)}}},{key:"onCache",value:function(e){var t=this;return this.emitter.on(o.type,e),function(){return t.emitter.removeListener(o.type,e)}}},{key:"raiseMarketUpdated",value:function(e){this.emitter.emit(l.type,new l(e))}},{key:"raiseCacheUpdated",value:function(e,t,n){this.emitter.emit(o.type,new o(e,t,n))}},{key:"raiseCacheDeleted",value:function(e){this.emitter.emit(c.type,new c(e))}},{key:"raiseCacheCleared",value:function(){this.emitter.emit(u.type,new u)}}]),e}()},31:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var a=n(28),r=n(21),i=n(45),o=n.n(i),c=n(1),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey",t=c.blob(32,e),n=t.decode.bind(t),a=t.encode.bind(t);return t.decode=function(e,t){var a=n(e,t);return new r.d(a)},t.encode=function(e,t,n){return a(e.toBuffer(),t,n)},t},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64",n=c.blob(8,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(8!==o.length){var c=e.alloc(8);o.copy(c),o=c}return i(o,n,a)},n},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint128",n=c.blob(16,t),r=n.decode.bind(n),i=n.encode.bind(n);return n.decode=function(e,t){var n=r(e,t);return new o.a(Object(a.a)(n).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)},n.encode=function(t,n,a){var r=t.toArray().reverse(),o=e.from(r);if(16!==o.length){var c=e.alloc(16);o.copy(c),o=c}return i(o,n,a)},n}}).call(this,n(57).Buffer)},34:function(e,t,n){"use strict";var a=n(420);n.d(t,"c",(function(){return a.a})),n.d(t,"r",(function(){return a.b}));var r=n(98);n.d(t,"f",(function(){return r.a})),n.d(t,"h",(function(){return r.b})),n.d(t,"l",(function(){return r.c})),n.d(t,"m",(function(){return r.d})),n.d(t,"q",(function(){return r.e})),n.d(t,"t",(function(){return r.f})),n.d(t,"u",(function(){return r.g}));var i=n(421);n.d(t,"d",(function(){return i.a})),n.d(t,"e",(function(){return i.b})),n.d(t,"o",(function(){return i.c})),n.d(t,"p",(function(){return i.d})),n.d(t,"s",(function(){return i.e}));var o=n(96);n.d(t,"b",(function(){return o.a})),n.d(t,"g",(function(){return o.b}));var c=n(298);n.d(t,"a",(function(){return c.a})),n.d(t,"i",(function(){return c.b})),n.d(t,"j",(function(){return c.c}));var l=n(422);n.d(t,"k",(function(){return l.a})),n.d(t,"n",(function(){return l.b}));var u=n(423);n.d(t,"v",(function(){return u.a}))},384:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p}));var a=n(11),r=n.n(a),i=n(19),o=n(21);function c(e,t,n,a){return l.apply(this,arguments)}function l(){return(l=Object(i.a)(r.a.mark((function e(t,n,a,i){var o,c,l,u,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=0,c=0,!(i.length>255)){e.next=15;break}case 3:if(!(i.length-c>255)){e.next=15;break}return l=i.slice(c,c+255),c+=255,console.log("send",(2|o).toString(16),l.length.toString(16),l),e.next=9,t.send(224,n,a,2|o,l);case 9:if(2===e.sent.length){e.next=12;break}throw new Error("Received unexpected reply payload");case 12:o|=1,e.next=3;break;case 15:return u=i.slice(c),console.log("send",o.toString(16),u.length.toString(16),u),e.next=19,t.send(224,n,a,o,u);case 19:return s=e.sent,e.abrupt("return",s.slice(0,s.length-2));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(e|1<<31>>>0)>>>0}function s(t,n){var a;a=void 0!==t?void 0!==n?4:3:2;var r=e.alloc(1+4*a),i=0;return i=r.writeUInt8(a,i),i=r.writeUInt32BE(u(44),i),i=r.writeUInt32BE(u(501),i),a>2&&(i=r.writeUInt32BE(u(t),i),4===a&&(i=r.writeUInt32BE(u(n),i))),r}function d(e,t){return f.apply(this,arguments)}function f(){return(f=Object(i.a)(r.a.mark((function e(t,n){var a,i,o=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>2&&void 0!==o[2]?o[2]:s(),i=n.serializeMessage(),e.abrupt("return",m(t,i,a));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(r.a.mark((function t(n,a){var i,o,l,u=arguments;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]?u[2]:s(),(o=e.alloc(1)).writeUInt8(1,0),l=e.concat([o,i,a]),t.abrupt("return",c(n,6,1,l));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(e){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(r.a.mark((function e(t){var n,a,i=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:s(),e.next=3,c(t,5,0,n);case 3:return a=e.sent,e.abrupt("return",new o.d(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,n(57).Buffer)},386:function(e){e.exports=JSON.parse('{"name":"token-lending-ui","version":"0.1.0","private":true,"homepage":".","dependencies":{"@ant-design/pro-layout":"^6.7.0","@craco/craco":"^5.9.0","@ledgerhq/hw-transport-webusb":"^5.41.0","@project-serum/serum":"^0.13.11","@project-serum/sol-wallet-adapter":"^0.1.4","@solana/spl-token":"0.0.11","@solana/spl-token-swap":"0.0.2","@solana/web3.js":"^0.86.2","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","@types/chart.js":"^2.9.29","@types/echarts":"^4.9.0","@types/react-router-dom":"^5.1.6","@welldone-software/why-did-you-render":"^6.0.5","antd":"^4.6.6","bn.js":"^5.1.3","bs58":"^4.0.1","buffer-layout":"^1.2.0","chart.js":"^2.9.4","craco-less":"^1.17.0","echarts":"^4.9.0","eventemitter3":"^4.0.7","identicon.js":"^2.3.3","jazzicon":"^1.5.0","lodash":"^4.17.20","react":"^16.13.1","react-dom":"^16.13.1","react-github-btn":"^1.2.0","react-intl":"^5.10.2","react-router-dom":"^5.2.0","react-scripts":"3.4.3","typescript":"^4.0.0"},"scripts":{"start":"craco start","build":"craco build","test":"craco test","eject":"react-scripts eject","localnet:update":"solana-localnet update","localnet:up":"rm client/util/store/config.json; set -x; solana-localnet down; set -e; solana-localnet up","localnet:down":"solana-localnet down","localnet:logs":"solana-localnet logs -f","predeploy":"yarn build","deploy":"gh-pages -d build","deploy:ar":"arweave deploy-dir build --key-file ","format:fix":"prettier --write \\"**/*.+(js|jsx|ts|tsx|json|css|md)\\""},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"repository":{"type":"git","url":"https://github.com/solana-labs/oyster-lending"},"devDependencies":{"@types/bn.js":"^4.11.6","@types/bs58":"^4.0.1","@types/identicon.js":"^2.3.0","@types/jest":"^24.9.1","@types/ledgerhq__hw-transport":"^4.21.3","@types/ledgerhq__hw-transport-webusb":"^4.70.1","@types/node":"^12.12.62","@types/react":"^16.9.50","@types/react-dom":"^16.9.8","arweave-deploy":"^1.9.1","gh-pages":"^3.2.3","prettier":"^2.1.2"}}')},392:function(e,t,n){},419:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(21),r=n(53),i=n(24);function o(e,t,n,o,c){var l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6?arguments[6]:void 0,s=i.c,d=new a.a;return e.push(r.d.createApproveInstruction(s,n,null!==u&&void 0!==u?u:d.publicKey,o,[],c)),l&&t.push(r.d.createRevokeInstruction(s,n,o,[])),d}},420:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var a=n(29),r=n(1),i=n(31),o=r.struct([r.u8("version"),r.u8("bumpSeed"),i.a("owner"),i.a("quoteMint"),i.a("tokenProgramId"),r.blob(62,"padding")]),c=function(e){return e.data.length===o.span},l=function(t,n){var r=e.from(n.data),i=o.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}}}).call(this,n(57).Buffer)},421:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return m}));var a=n(29),r=n(21),i=n(1),o=n(34),c=n(24),l=n(31),u=i.struct([i.u8("version"),l.c("depositedCollateral"),l.a("collateralReserve"),l.b("cumulativeBorrowRateWad"),l.b("borrowAmountWad"),l.a("borrowReserve"),l.a("tokenMint"),i.blob(128,"padding")]),s=function(e){return e.data.length===u.span},d=function(t,n){var r=e.from(n.data),i=u.decode(r);return{pubkey:t,account:Object(a.a)({},n),info:i}},f=function(e){return""},m=function(t,n,a,l,u,s,d,f){var m=i.struct([i.u8("instruction")]),b=e.alloc(m.span);m.encode({instruction:o.b.InitObligation},b);var p=[{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:r.e,isSigner:!1,isWritable:!1},{pubkey:r.f,isSigner:!1,isWritable:!1},{pubkey:c.c,isSigner:!1,isWritable:!1}];return new r.i({keys:p,programId:c.a,data:b})}}).call(this,n(57).Buffer)},422:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var a=n(21),r=n(45),i=n.n(r),o=n(1),c=n(24),l=n(31),u=n(298),s=n(96),d=n(98),f=function(t,n,r,u,d,f,m,b,p){var v=o.struct([o.u8("instruction"),l.c("liquidityAmount")]),y=e.alloc(v.span);v.encode({instruction:s.a.DepositReserveLiquidity,liquidityAmount:new i.a(t)},y);var E=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!0,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:c.c,isSigner:!1,isWritable:!1}];return new a.i({keys:E,programId:c.a,data:y})},m=function(e){return Object(d.c)(e)*Object(u.c)(e)}}).call(this,n(57).Buffer)},423:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(21),r=n(45),i=n.n(r),o=n(1),c=n(24),l=n(31),u=n(96),s=function(t,n,r,s,d,f,m,b,p){var v=o.struct([o.u8("instruction"),l.c("collateralAmount")]),y=e.alloc(v.span);v.encode({instruction:u.a.WithdrawReserveLiquidity,collateralAmount:new i.a(t)},y);var E=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!0,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:c.c,isSigner:!1,isWritable:!1}];return new a.i({keys:E,programId:c.a,data:y})}}).call(this,n(57).Buffer)},424:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u}));var a=n(1),r=n(31),i=(n(425),a.struct([a.nu64("tradeFeeNumerator"),a.nu64("tradeFeeDenominator"),a.nu64("ownerTradeFeeNumerator"),a.nu64("ownerTradeFeeDenominator"),a.nu64("ownerWithdrawFeeNumerator"),a.nu64("ownerWithdrawFeeDenominator"),a.nu64("hostFeeNumerator"),a.nu64("hostFeeDenominator")],"fees")),o=a.struct([a.u8("isInitialized"),a.u8("nonce"),Object(r.a)("tokenAccountA"),Object(r.a)("tokenAccountB"),Object(r.a)("tokenPool"),Object(r.c)("feesNumerator"),Object(r.c)("feesDenominator")]),c=a.struct([a.u8("isInitialized"),a.u8("nonce"),Object(r.a)("tokenProgramId"),Object(r.a)("tokenAccountA"),Object(r.a)("tokenAccountB"),Object(r.a)("tokenPool"),Object(r.a)("mintA"),Object(r.a)("mintB"),Object(r.a)("feeAccount"),a.u8("curveType"),Object(r.c)("tradeFeeNumerator"),Object(r.c)("tradeFeeDenominator"),Object(r.c)("ownerTradeFeeNumerator"),Object(r.c)("ownerTradeFeeDenominator"),Object(r.c)("ownerWithdrawFeeNumerator"),Object(r.c)("ownerWithdrawFeeDenominator"),a.blob(16,"padding")]),l=a.union(a.u8(),a.blob(32),"curve");l.addVariant(0,a.struct([]),"constantProduct"),l.addVariant(1,a.struct([a.nu64("token_b_price")]),"constantPrice"),l.addVariant(2,a.struct([]),"stable"),l.addVariant(3,a.struct([a.nu64("token_b_offset")]),"offset");var u=a.struct([a.u8("isInitialized"),a.u8("nonce"),Object(r.a)("tokenProgramId"),Object(r.a)("tokenAccountA"),Object(r.a)("tokenAccountB"),Object(r.a)("tokenPool"),Object(r.a)("mintA"),Object(r.a)("mintB"),Object(r.a)("feeAccount"),i,l])},426:function(e,t,n){"use strict";var a;!function(e){e[e.ConstantProduct=0]="ConstantProduct",e[e.ConstantPrice=1]="ConstantPrice",e[e.Stable=2]="Stable",e[e.ConstantProductWithOffset=3]="ConstantProductWithOffset"}(a||(a={}))},427:function(e,t){},43:function(e,t,n){"use strict";var a=n(419);n.d(t,"approve",(function(){return a.a}));var r=n(34);n.d(t,"BorrowAmountType",(function(){return r.a})),n.d(t,"LendingObligationLayout",(function(){return r.d})),n.d(t,"LendingReserveParser",(function(){return r.f})),n.d(t,"TransactionListLookup",(function(){return r.g})),n.d(t,"borrowInstruction",(function(){return r.i})),n.d(t,"calculateBorrowAPY",(function(){return r.j})),n.d(t,"collateralToLiquidity",(function(){return r.m})),n.d(t,"initObligationInstruction",(function(){return r.p})),n.d(t,"reserveMarketCap",(function(){return r.u}));var i=n(424);n.d(t,"TokenSwapLayout",(function(){return i.a})),n.d(t,"TokenSwapLayoutLegacyV0",(function(){return i.b})),n.d(t,"TokenSwapLayoutV1",(function(){return i.c}));n(426),n(427)},443:function(e,t,n){},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),i=n(390);function o(e){var t=e.message,n=void 0===t?"":t,a=e.description,o=void 0===a?void 0:a,c=e.txid,l=void 0===c?"":c,u=e.type,s=void 0===u?"info":u,d=e.placement,f=void 0===d?"bottomLeft":d;l&&(o=r.a.createElement(r.a.Fragment,null)),i.a[s]({message:r.a.createElement("span",{style:{color:"black"}},n),description:r.a.createElement("span",{style:{color:"black",opacity:.5}},o),placement:f,style:{backgroundColor:"white"}})}},551:function(e,t,n){e.exports=n.p+"static/media/sollet.57232127.svg"},552:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAABcRAAAXEQHKJvM/AAAAB3RJTUUH5AodAxUAnDE8mgAABtJJREFUeNrtXGtsVEUUvrttXfsCKgooImA1oBasERIblagx0MciIVZFY2KMDSpq9IcGjYgaNaFC8EUUkiag0YTgIyYY5NG9vBHwkYigUQQfaA1E2l1qAYF2PDN3MHQ73/RCe/fu0DnJl2w2e+fMfHtmzmNmruNYsWLFihUrVqxYsWIlJGGJfoQHCNMBqhy2IdLpkZpkPqtpuZ8wHWAKm9QWSdOTS7hPo+dO0hM1jLy1Eep4A4EBfEkYnkZehAiaS2AAOwmj0/RwAp/V6NlDKDfR+m4hnACD2koo6fJITXI8EXQUkPct4UKFnlGENqDnJ8JIU6fvGjCo3Q5zBykfqWlZBshrIgwFehYBPX8Lcs0kr7EEWF87oRKQV0xoUZDXQZgG9ORTe/sAgQ+K6W2o9VVg60vkAQKvIpxQEHiAxVMxoGcY4ZhCz1FCvsne92ZA4FfwkZpkubS2dAL3aPSMkFadrqfZ9PBlLCCQT7cYsMBSwjEFgSkWP1QA9Awm/KPQ0yFCKHMJdAvBGniccKXykerkuUTWQQWB7YQKoOccau8X8GdVmm6F28HAnsPTuGUV8MLzNXqWAj2LCUYTOBMM7HeynCJA4HRAIHnn1ACg5w6gp5X0DDOZwCGEJBjc84DAEsJfgMTXWNVB1TTOl9mGSs8SkREZTCJKsWjhd0cCEmcAAo8QyoGeu4EeCnHcCSYTWETYCQb3ocPWRBXhTIyI2gpIXE0xYa7CCqPUXiPQs40C7jyTPXKlDCtUWcmtICa8TnpflUeuBXrGUHtHQEhTZzCB66KetSmt42sRiqincgOwwt0snswHFj8X6NmPHJcpU7mU8C+wjonquLBlKJGVBLnxXUDP+YQmmBsbHhd+AOM1HBcuAFb4qUbPS0DPOtM9chUY2G80sCggsALkxyl2WyoH6BkN1lxeMxxgsjMZCPJWWvjdiwCBRYT9aitMlp5+eueOM5jAjdw6/gDeuAx4Y07id2AaX6/RswFYe9xkC4yCBZ4TOEZNYCpKRO0CBN4A9PC9mM2AwMkmr4EVoELTJrynegqX4T2SJCrxX6LZIykzlLy1MS8jUA5qvfKRqmSeyDzU1rcD6MnVxJw/o1pktlseX9TfBYPi3rJLZsHizTkyhOkAcWCdQg9fIl4GHpjjSVMLq+9r9mxX0m9yOwfQzbyw+o5mb3gLZSKxND3c8uaB8j7HLlG1Mczy8ggvyO1NFZan1+so++CW9xRhDcAKWvtGKSxvhkbPSjM31q1YydRUvVeeDggbj/kP6N1i+v0kwjOENwlvyc/8u+JME7hI4yQyiRU++noeoZ5wQNPOAVkWK7EEdu7nRE2pS4UmVGrrWwR6x99q5XGP023zsDhb2LcJTIzztjjPuN3WYKs42UwgT91wCnk6+MZh66N9kcDaXmy/NgQC3QpxjDczGKTo22caQg4RZokKjYdZ8jv0e2prZcYtcHiIeXgB6T8I+tXuxXwr0sdSDTa/Tp54LexDBCYuB4cvvSKGOsjmxdjPNTNqRBAdfVuj8NIQCSzXlLbqNc/VawyiPIiOzsusQt9T+ArNLYGl6meY7rgcE1YdAIEzNQonh0hgf41TOCy2P7uOpUzzTGswp15ZYpqGwKdDLnRs0vRtr7dX3Zgja4rV8jv0+41iwyqATo7VKF0eMoEP+4jv2jSbUKfioaA6WShdPHD9bknI03hvLwTR+8hSCwLq5BZH7/oT94RshVM1zsQPjos2Au7ko5oObA4uj/TVt8E9KCZ0iOPIbFfgU2WIJmilqN8N0Rtr4zod+GHNJwiRTHX0Y01nfghlW9ELS1rPYMry48LXUp8z2tkJ3aw18x22OnPn87zT+7owppnwiTxHw/GR3Be5Wpzjyfy/vZ7nkas0HT4hbpVnpC8io1jYjaXNzsYdumvAQe9T15XbA/4jeVD8Sjfk8UOdhVlIoMtJnONjca5z2KpIQNN2gaaIIGeCO8XJWvEC6+3dkNguqzj9e1HvZYS1PpzEQrHcZLUwt1STnaQdOXMpl3ZzekBcsbwRdciHvi/E5R8jhCVu9Dkoju9lMH6xwxb5aTsqc/A53WySn4of0VnsbCaxUnPhEJWZ+PR/w3vnQSJOuEnegJ8qA9slHhkiXvPb7m50N88US2wKcbdum3i3gtHC393ivSsm0+QtJsvr55wV4h31nQ3uivQ2/vQuYjdGnLNK+BV87ybRMk3xoSfg6+2rhIHOWS1s08mspUHmpD0hrcPLLBIvCi/e54RXrMXb1RLvEX71SRoPxHcQXhd3jpkbc6z8XwS4QHpufvL1cbEx5e38PSJfMDGe8tgiS5YVK1asWLFixUog8h9ihiN1wXNPFQAAAABJRU5ErkJggg=="},553:function(e,t,n){e.exports=n.p+"static/media/solflare.26e1b240.svg"},554:function(e,t,n){e.exports=n.p+"static/media/mathwallet.0b4a504a.svg"},555:function(e,t,n){e.exports=n.p+"static/media/ledger.1c9e553b.svg"},568:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(21),r=n(45),i=n.n(r),o=n(96),c=n(1),l=n(31),u=n(24),s=function(t,n,r,s,d,f,m,b,p,v,y,E,g){var h=c.struct([c.u8("instruction"),l.c("liquidityAmount")]),O=e.alloc(h.span);h.encode({instruction:o.a.RepayObligationLiquidity,liquidityAmount:new i.a(t)},O);var j=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!0,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:u.c,isSigner:!1,isWritable:!1}];return new a.i({keys:j,programId:u.a,data:O})}}).call(this,n(57).Buffer)},569:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(21),r=n(45),i=n.n(r),o=n(96),c=n(1),l=n(31),u=n(24),s=function(t,n,r,s,d,f,m,b,p,v,y,E,g,h){var O=c.struct([c.u8("instruction"),l.c("liquidityAmount")]),j=e.alloc(O.span);O.encode({instruction:o.a.LiquidateObligation,liquidityAmount:new i.a(t)},j);var w=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:v,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!0,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:a.e,isSigner:!1,isWritable:!1},{pubkey:u.c,isSigner:!1,isWritable:!1}];return new a.i({keys:w,programId:u.a,data:j})}}).call(this,n(57).Buffer)},581:function(e,t,n){e.exports=n(1157)},586:function(e,t,n){},589:function(e,t){},590:function(e,t){},619:function(e,t){},62:function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return W}));var a=n(20),r=n(541),i=n(1165),o=n(130),c=n(0),l=n.n(c),u=n(54),s=n(27),d=n(12),f=n(11),m=n.n(f),b=n(19),p=n(74),v=n(83),y=n(100),E=n(99),g=n(138),h=n.n(g),O=n(548),j=n(384),w=function(e){Object(y.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this))._connecting=void 0,e._publicKey=void 0,e._transport=void 0,e._connecting=!1,e._publicKey=null,e._transport=null,e}return Object(v.a)(n,[{key:"signTransaction",value:function(){var e=Object(b.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._transport&&this._publicKey){e.next=2;break}throw new Error("Not connected to Ledger");case 2:return e.next=4,Object(j.b)(this._transport,t);case 4:return n=e.sent,t.addSignature(this._publicKey,n),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._connecting){e.next=2;break}return e.abrupt("return");case 2:return this._connecting=!0,e.prev=3,e.next=6,O.a.create();case 6:return this._transport=e.sent,e.next=9,Object(j.a)(this._transport);case 9:this._publicKey=e.sent,this.emit("connect",this._publicKey),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(3),Object(u.a)({message:"Ledger Error",description:e.t0.message}),e.next=18,this.disconnect();case 18:return e.prev=18,this._connecting=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!this._transport){e.next=6;break}return e.next=4,this._transport.close();case 4:this._transport=null,t=!0;case 6:this._connecting=!1,this._publicKey=null,t&&this.emit("disconnect");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publicKey",get:function(){return this._publicKey}}]),n}(h.a),k=n(157),A=n(21),x=function(e){Object(y.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this))._publicKey=void 0,e._onProcess=void 0,e._publicKey=null,e._onProcess=!1,e.connect=e.connect.bind(Object(k.a)(e)),e}return Object(v.a)(n,[{key:"signTransaction",value:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.solong.signTransaction(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;this._onProcess||(void 0!==window.solong?(this._onProcess=!0,window.solong.selectAccount().then((function(t){e._publicKey=new A.d(t),e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))):Object(u.a)({message:"Solong Error",description:"Please install solong wallet from Chrome "}))}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=null,this.emit("disconnect"))}},{key:"publicKey",get:function(){return this._publicKey}}]),n}(h.a),S=n(551),T=n.n(S),N=n(552),I=n.n(N),B=n(553),L=n.n(B),M=n(554),C=n.n(M),_=n(555),R=n.n(_),q=[{name:"Sollet",url:"https://www.sollet.io",icon:T.a},{name:"Solong",url:"https://solongwallet.com",icon:I.a,adapter:x},{name:"Solflare",url:"https://solflare.com/access-wallet",icon:L.a},{name:"MathWallet",url:"https://mathwallet.org",icon:C.a},{name:"Ledger",url:"https://www.ledger.com",icon:R.a,adapter:w}],P=l.a.createContext({wallet:void 0,connected:!1,select:function(){},provider:void 0});function D(e){var t=e.children,n=void 0===t?null:t,f=Object(s.e)().endpoint,m=Object(c.useState)(!1),b=Object(a.a)(m,2),p=b[0],v=b[1],y=Object(d.r)("walletProvider"),E=Object(a.a)(y,2),g=E[0],h=E[1],O=Object(c.useMemo)((function(){return q.find((function(e){return e.url===g}))}),[g]),j=Object(c.useMemo)((function(){if(O)return new(O.adapter||r.a)(g,f)}),[O,g,f]),w=Object(c.useState)(!1),k=Object(a.a)(w,2),A=k[0],x=k[1];Object(c.useEffect)((function(){return j&&(j.on("connect",(function(){if(j.publicKey){x(!0);var e=j.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(u.a)({message:"Wallet update",description:"Connected to wallet "+t})}})),j.on("disconnect",(function(){x(!1),Object(u.a)({message:"Wallet update",description:"Disconnected from wallet"})}))),function(){x(!1),j&&j.disconnect()}}),[j]),Object(c.useEffect)((function(){return j&&p&&(j.connect(),v(!1)),function(){}}),[j,p]);var S=Object(c.useState)(!1),T=Object(a.a)(S,2),N=T[0],I=T[1],B=Object(c.useCallback)((function(){return I(!0)}),[]),L=Object(c.useCallback)((function(){return I(!1)}),[]);return l.a.createElement(P.Provider,{value:{wallet:j,connected:A,select:B,provider:O}},n,l.a.createElement(i.a,{title:"Select Wallet",okText:"Connect",visible:N,okButtonProps:{style:{display:"none"}},onCancel:L,width:400},q.map((function(e){return l.a.createElement(o.a,{size:"large",type:g===e.url?"primary":"ghost",onClick:function(){h(e.url),v(!0),L()},icon:l.a.createElement("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:8}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8}},e.name)}))))}function W(){var e=Object(c.useContext)(P),t=e.wallet,n=e.connected,a=e.provider,r=e.select;return{wallet:t,connected:n,provider:a,select:r,connect:function(){t?t.connect():r()},disconnect:function(){null===t||void 0===t||t.disconnect()}}}},621:function(e,t){},633:function(e,t){},634:function(e,t){},745:function(e,t,n){},811:function(e,t,n){},812:function(e,t,n){},813:function(e,t,n){},814:function(e,t,n){},819:function(e,t,n){},820:function(e,t,n){},821:function(e,t,n){},822:function(e,t,n){},823:function(e,t,n){},824:function(e,t,n){},825:function(e,t,n){},826:function(e,t,n){},827:function(e,t,n){},828:function(e,t,n){},829:function(e,t,n){},830:function(e,t,n){},831:function(e,t,n){},832:function(e,t,n){},833:function(e,t,n){},834:function(e,t,n){},859:function(e,t,n){},860:function(e,t,n){},861:function(e,t,n){},96:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),function(e){e[e.InitLendingMarket=0]="InitLendingMarket",e[e.InitReserve=1]="InitReserve",e[e.InitObligation=2]="InitObligation",e[e.DepositReserveLiquidity=3]="DepositReserveLiquidity",e[e.WithdrawReserveLiquidity=4]="WithdrawReserveLiquidity",e[e.BorrowLiquidity=5]="BorrowLiquidity",e[e.RepayObligationLiquidity=6]="RepayObligationLiquidity",e[e.LiquidateObligation=7]="LiquidateObligation",e[e.AccrueReserveInterest=8]="AccrueReserveInterest"}(a||(a={}));var r={3:"Deposit",4:"Withdraw",5:"Borrow",6:"Repay",7:"Liquidate"}},98:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return E})),n.d(t,"g",(function(){return g})),n.d(t,"d",(function(){return O}));var a=n(28),r=n(29),i=n(21),o=n(45),c=n.n(o),l=n(1),u=n(24),s=n(12),d=n(31),f=n(96),m=l.struct([l.u8("version"),d.c("lastUpdateSlot"),d.a("lendingMarket"),d.a("liquidityMint"),l.u8("liquidityMintDecimals"),d.a("liquiditySupply"),d.a("collateralMint"),d.a("collateralSupply"),d.a("collateralFeesReceiver"),l.u32("dexMarketOption"),d.a("dexMarket"),l.struct([l.u8("optimalUtilizationRate"),l.u8("loanToValueRatio"),l.u8("liquidationBonus"),l.u8("liquidationThreshold"),l.u8("minBorrowRate"),l.u8("optimalBorrowRate"),l.u8("maxBorrowRate"),l.struct([d.c("borrowFeeWad"),l.u8("hostFeePercentage")],"fees")],"config"),l.struct([d.b("cumulativeBorrowRateWad"),d.b("borrowedLiquidityWad"),d.c("availableLiquidity"),d.c("collateralMintSupply")],"state"),l.blob(300,"padding")]),b=function(e){return e.data.length===m.span},p=function(t,n){var a=e.from(n.data),i=m.decode(a);if(0!==i.lastUpdateSlot.toNumber())return{pubkey:t,account:Object(r.a)({},n),info:i}},v=function(t,n,a,r,o,s,m,b,p,v,y,E,g){var h=l.struct([l.u8("instruction"),d.c("liquidityAmount"),l.u8("maxUtilizationRate")]),O=e.alloc(h.span);h.encode({instruction:f.a.InitReserve,liquidityAmount:new c.a(t),maxUtilizationRate:n},O);var j=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!0,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!0,isWritable:!1},{pubkey:i.e,isSigner:!1,isWritable:!1},{pubkey:i.f,isSigner:!1,isWritable:!1},{pubkey:u.c,isSigner:!1,isWritable:!1}];return g&&j.push({pubkey:g,isSigner:!1,isWritable:!1}),new i.i({keys:j,programId:u.a,data:O})},y=function(){var t=l.struct([l.u8("instruction")]),n=e.alloc(t.span);t.encode({instruction:f.a.AccrueReserveInterest},n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];var s=[{pubkey:i.e,isSigner:!1,isWritable:!1}].concat(Object(a.a)(o.map((function(e){return{pubkey:e,isSigner:!1,isWritable:!0}}))));return new i.i({keys:s,programId:u.a,data:n})},E=function(e){var t=Object(s.s)(e.state.borrowedLiquidityWad).toNumber();return t/(e.state.availableLiquidity.toNumber()+t)},g=function(e){return((null===e||void 0===e?void 0:e.state.availableLiquidity.toNumber())||0)+Object(s.s)(null===e||void 0===e?void 0:e.state.borrowedLiquidityWad).toNumber()},h=function(e){return((null===e||void 0===e?void 0:e.state.collateralMintSupply.toNumber())||1)/g(e)},O=function(e,t){var n="number"===typeof e?e:e.toNumber();return Math.floor(n/h(t))}}).call(this,n(57).Buffer)}},[[581,1,2]]]);